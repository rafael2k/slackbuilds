diff -ur php-4.4.1.orig/TSRM/tsrm.m4 php-4.4.1/TSRM/tsrm.m4
--- php-4.4.1.orig/TSRM/tsrm.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/TSRM/tsrm.m4	2006-01-08 11:49:26.000000000 +0000
@@ -53,7 +53,7 @@
 AC_DEFUN([TSRM_CHECK_ST],[
   if test -r "$1/include/st.h"; then
     CPPFLAGS="$CPPFLAGS -I$1/include"
-    LDFLAGS="$LDFLAGS -L$1/lib"
+    LDFLAGS="$LDFLAGS -L$1/$with__lib"
   elif test -r "$1/st.h"; then
     CPPFLAGS="$CPPFLAGS -I$1"
     LDFLAGS="$LDFLAGS -L$1"
diff -ur php-4.4.1.orig/acinclude.m4 php-4.4.1/acinclude.m4
--- php-4.4.1.orig/acinclude.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/acinclude.m4	2006-01-08 11:49:26.000000000 +0000
@@ -194,7 +194,7 @@
   unset ac_new_flags
   for i in [$]$1; do
     case [$]i in
-    -L/usr/lib|-L/usr/lib/[)] ;;
+    -L/usr/$with__lib|-L/usr/$with__lib/[)] ;;
     *[)] ac_new_flags="[$]ac_new_flags [$]i" ;;
     esac
   done
@@ -645,7 +645,7 @@
 ])
 
 AC_DEFUN([PHP_PROG_SENDMAIL],[
-PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib
+PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/$with__lib
 AC_PATH_PROG(PROG_SENDMAIL, sendmail,[], $PATH:$PHP_ALT_PATH)
 if test -n "$PROG_SENDMAIL"; then
   AC_DEFINE(HAVE_SENDMAIL,1,[whether you have sendmail])
@@ -657,7 +657,7 @@
 AC_MSG_CHECKING([if compiler supports -R])
 AC_CACHE_VAL(php_cv_cc_dashr,[
 	SAVE_LIBS=$LIBS
-	LIBS="-R /usr/lib $LIBS"
+	LIBS="-R /usr/$with__lib $LIBS"
 	AC_TRY_LINK([], [], php_cv_cc_dashr=yes, php_cv_cc_dashr=no)
 	LIBS=$SAVE_LIBS])
 AC_MSG_RESULT([$php_cv_cc_dashr])
@@ -667,7 +667,7 @@
 	AC_MSG_CHECKING([if compiler supports -Wl,-rpath,])
 	AC_CACHE_VAL(php_cv_cc_rpath,[
 		SAVE_LIBS=$LIBS
-		LIBS="-Wl,-rpath,/usr/lib $LIBS"
+		LIBS="-Wl,-rpath,/usr/$with__lib $LIBS"
 		AC_TRY_LINK([], [], php_cv_cc_rpath=yes, php_cv_cc_rpath=no)
 		LIBS=$SAVE_LIBS])
 	AC_MSG_RESULT([$php_cv_cc_rpath])
@@ -856,7 +856,7 @@
 dnl add a library to linkpath/runpath
 dnl
 AC_DEFUN([PHP_ADD_LIBPATH],[
-  if test "$1" != "/usr/lib"; then
+  if test "$1" != "/usr/$with__lib"; then
     PHP_EXPAND_PATH($1, ai_p)
     ifelse([$2],,[
       _PHP_ADD_LIBPATH_GLOBAL([$ai_p])
@@ -1748,8 +1748,8 @@
       if test -r $i/include/openssl/evp.h; then
         OPENSSL_INCDIR=$i/include
       fi
-      if test -r $i/lib/libssl.a -o -r $i/lib/libssl.$SHLIB_SUFFIX_NAME; then
-        OPENSSL_LIBDIR=$i/lib
+      if test -r $i/$with__lib/libssl.a -o -r $i/$with__lib/libssl.$SHLIB_SUFFIX_NAME; then
+        OPENSSL_LIBDIR=$i/$with__lib
       fi
       test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
     done
@@ -1870,8 +1870,8 @@
       AC_MSG_ERROR([Please specify the install prefix of iconv with --with-iconv=<DIR>])
     fi
   
-    if test -f $ICONV_DIR/lib/lib$iconv_lib_name.a ||
-       test -f $ICONV_DIR/lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
+    if test -f $ICONV_DIR/$with__lib/lib$iconv_lib_name.a ||
+       test -f $ICONV_DIR/$with__lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
     then
       PHP_CHECK_LIBRARY($iconv_lib_name, libiconv, [
         found_iconv=yes
@@ -1881,10 +1881,10 @@
           found_iconv=yes
           PHP_DEFINE(HAVE_ICONV,1,[ext/iconv])
         ], [], [
-          -L$ICONV_DIR/lib
+          -L$ICONV_DIR/$with__lib
         ])
       ], [
-        -L$ICONV_DIR/lib
+        -L$ICONV_DIR/$with__lib
       ])
     fi
   fi
@@ -1892,7 +1892,7 @@
   if test "$found_iconv" = "yes"; then
     if test -n "$ICONV_DIR"; then
       AC_DEFINE(HAVE_ICONV, 1, [ ])
-      PHP_ADD_LIBRARY_WITH_PATH($iconv_lib_name, $ICONV_DIR/lib, $1)
+      PHP_ADD_LIBRARY_WITH_PATH($iconv_lib_name, $ICONV_DIR/$with__lib, $1)
       PHP_ADD_INCLUDE($ICONV_DIR/include)
     fi
     $2
diff -ur php-4.4.1.orig/aclocal.m4 php-4.4.1/aclocal.m4
--- php-4.4.1.orig/aclocal.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/aclocal.m4	2006-01-08 11:49:26.000000000 +0000
@@ -194,7 +194,7 @@
   unset ac_new_flags
   for i in [$]$1; do
     case [$]i in
-    -L/usr/lib|-L/usr/lib/[)] ;;
+    -L/usr/$with__lib|-L/usr/$with__lib/[)] ;;
     *[)] ac_new_flags="[$]ac_new_flags [$]i" ;;
     esac
   done
@@ -645,7 +645,7 @@
 ])
 
 AC_DEFUN([PHP_PROG_SENDMAIL],[
-PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib
+PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/$with__lib
 AC_PATH_PROG(PROG_SENDMAIL, sendmail,[], $PATH:$PHP_ALT_PATH)
 if test -n "$PROG_SENDMAIL"; then
   AC_DEFINE(HAVE_SENDMAIL,1,[whether you have sendmail])
@@ -657,7 +657,7 @@
 AC_MSG_CHECKING([if compiler supports -R])
 AC_CACHE_VAL(php_cv_cc_dashr,[
 	SAVE_LIBS=$LIBS
-	LIBS="-R /usr/lib $LIBS"
+	LIBS="-R /usr/$with__lib $LIBS"
 	AC_TRY_LINK([], [], php_cv_cc_dashr=yes, php_cv_cc_dashr=no)
 	LIBS=$SAVE_LIBS])
 AC_MSG_RESULT([$php_cv_cc_dashr])
@@ -667,7 +667,7 @@
 	AC_MSG_CHECKING([if compiler supports -Wl,-rpath,])
 	AC_CACHE_VAL(php_cv_cc_rpath,[
 		SAVE_LIBS=$LIBS
-		LIBS="-Wl,-rpath,/usr/lib $LIBS"
+		LIBS="-Wl,-rpath,/usr/$with__lib $LIBS"
 		AC_TRY_LINK([], [], php_cv_cc_rpath=yes, php_cv_cc_rpath=no)
 		LIBS=$SAVE_LIBS])
 	AC_MSG_RESULT([$php_cv_cc_rpath])
@@ -856,7 +856,7 @@
 dnl add a library to linkpath/runpath
 dnl
 AC_DEFUN([PHP_ADD_LIBPATH],[
-  if test "$1" != "/usr/lib"; then
+  if test "$1" != "/usr/$with__lib"; then
     PHP_EXPAND_PATH($1, ai_p)
     ifelse([$2],,[
       _PHP_ADD_LIBPATH_GLOBAL([$ai_p])
@@ -1748,8 +1748,8 @@
       if test -r $i/include/openssl/evp.h; then
         OPENSSL_INCDIR=$i/include
       fi
-      if test -r $i/lib/libssl.a -o -r $i/lib/libssl.$SHLIB_SUFFIX_NAME; then
-        OPENSSL_LIBDIR=$i/lib
+      if test -r $i/$with__lib/libssl.a -o -r $i/$with__lib/libssl.$SHLIB_SUFFIX_NAME; then
+        OPENSSL_LIBDIR=$i/$with__lib
       fi
       test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
     done
@@ -1870,8 +1870,8 @@
       AC_MSG_ERROR([Please specify the install prefix of iconv with --with-iconv=<DIR>])
     fi
   
-    if test -f $ICONV_DIR/lib/lib$iconv_lib_name.a ||
-       test -f $ICONV_DIR/lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
+    if test -f $ICONV_DIR/$with__lib/lib$iconv_lib_name.a ||
+       test -f $ICONV_DIR/$with__lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
     then
       PHP_CHECK_LIBRARY($iconv_lib_name, libiconv, [
         found_iconv=yes
@@ -1881,10 +1881,10 @@
           found_iconv=yes
           PHP_DEFINE(HAVE_ICONV,1,[ext/iconv])
         ], [], [
-          -L$ICONV_DIR/lib
+          -L$ICONV_DIR/$with__lib
         ])
       ], [
-        -L$ICONV_DIR/lib
+        -L$ICONV_DIR/$with__lib
       ])
     fi
   fi
@@ -1892,7 +1892,7 @@
   if test "$found_iconv" = "yes"; then
     if test -n "$ICONV_DIR"; then
       AC_DEFINE(HAVE_ICONV, 1, [ ])
-      PHP_ADD_LIBRARY_WITH_PATH($iconv_lib_name, $ICONV_DIR/lib, $1)
+      PHP_ADD_LIBRARY_WITH_PATH($iconv_lib_name, $ICONV_DIR/$with__lib, $1)
       PHP_ADD_INCLUDE($ICONV_DIR/include)
     fi
     $2
@@ -2915,7 +2915,7 @@
 	# AIX 5 now supports IA64 processor
 	lt_cv_prog_cc_static='-Bstatic'
       else
-	lt_cv_prog_cc_static='-bnso -bI:/lib/syscalls.exp'
+	lt_cv_prog_cc_static='-bnso -bI:/$with__lib/syscalls.exp'
       fi
       ;;
 
@@ -3314,7 +3314,7 @@
       else $CC -o impgen impgen.c ; fi)~
       $output_objdir/impgen $dir/$soroot > $output_objdir/$soname-def'
 
-    old_archive_from_expsyms_cmds='$DLLTOOL --as=$AS --dllname $soname --def $output_objdir/$soname-def --output-lib $output_objdir/$newlib'
+    old_archive_from_expsyms_cmds='$DLLTOOL --as=$AS --dllname $soname --def $output_objdir/$soname-def --output-$with__lib $output_objdir/$newlib'
 
     # cygwin and mingw dlls have different entry points and sets of symbols
     # to exclude.
@@ -3374,7 +3374,7 @@
       $CC -Wl,--base-file,$output_objdir/$soname-base '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags~
       $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~
       $CC -Wl,--base-file,$output_objdir/$soname-base $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags~
-      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp --output-lib $output_objdir/$libname.dll.a~
+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp --output-$with__lib $output_objdir/$libname.dll.a~
       $CC $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags'
     ;;
 
@@ -3540,15 +3540,15 @@
       # Warning - without using the other runtime loading flags (-brtl),
       # -berok will link without error, but may produce a broken library.
       allow_undefined_flag='-berok'
-      hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:/usr/lib:/lib'
+      hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:/usr/$with__lib:/$with__lib'
       archive_expsym_cmds="\$CC"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag"
     else
       if test "$host_cpu" = ia64; then
-	hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/lib:/lib'
+	hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/$with__lib:/$with__lib'
 	allow_undefined_flag="-z nodefs"
 	archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname ${wl}-h$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols"
       else
-	hardcode_libdir_flag_spec='${wl}-bnolibpath ${wl}-blibpath:$libdir:/usr/lib:/lib'
+	hardcode_libdir_flag_spec='${wl}-bnolibpath ${wl}-blibpath:$libdir:/usr/$with__lib:/$with__lib'
 	# Warning - without using the other run time loading flags,
 	# -berok will link without error, but may produce a broken library.
 	allow_undefined_flag='${wl}-berok'
@@ -3575,13 +3575,13 @@
     hardcode_libdir_flag_spec=' '
     allow_undefined_flag=unsupported
     # Tell ltmain to make .lib files, not .a files.
-    libext=lib
+    libext=$with__lib
     # FIXME: Setting linknames here is a bad hack.
     archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo "$deplibs" | sed -e '\''s/ -lc$//'\''` -link -dll~linknames='
     # The linker will automatically build a .lib file if we build a DLL.
     old_archive_from_new_cmds='true'
-    # FIXME: Should let the user specify the lib program.
-    old_archive_cmds='lib /OUT:$oldlib$oldobjs$old_deplibs'
+    # FIXME: Should let the user specify the $with__lib program.
+    old_archive_cmds='$with__lib /OUT:$oldlib$oldobjs$old_deplibs'
     fix_srcfile_path='`cygpath -w "$srcfile"`'
     ;;
 
@@ -3598,7 +3598,7 @@
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.  Also zsh mangles
     #	     `"' quotes if we put them in here... so don't!
-    archive_cmds='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib ${lib}-master.o $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
+    archive_cmds='$CC -r -keep_private_externs -nostdlib -o ${$with__lib}-master.o $libobjs && $CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib ${$with__lib}-master.o $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
@@ -3615,7 +3615,7 @@
   # does not break anything, and helps significantly (at the cost of a little
   # extra space).
   freebsd2.2*)
-    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/$with__lib/c++rt0.o'
     hardcode_libdir_flag_spec='-R$libdir'
     hardcode_direct=yes
     hardcode_shlibpath_var=no
@@ -3949,8 +3949,8 @@
 shlibpath_overrides_runpath=unknown
 version_type=none
 dynamic_linker="$host_os ld.so"
-sys_lib_dlsearch_path_spec="/lib /usr/lib"
-sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"
+sys_lib_dlsearch_path_spec="/$with__lib /usr/$with__lib"
+sys_lib_search_path_spec="/$with__lib /usr/$with__lib /usr/local/$with__lib"
 
 case $host_os in
 aix3*)
@@ -3993,8 +3993,8 @@
     # add versioning support to collect2, so additional links can
     # be useful in future.
     if test "$aix_use_runtimelinking" = yes; then
-      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
-      # instead of lib<name>.a to let people know that these are not
+      # If using run time linking (on AIX 4.2 or later) use $with__lib<name>.so
+      # instead of $with__lib<name>.a to let people know that these are not
       # typical AIX shared libraries.
       library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
     else
@@ -4027,11 +4027,11 @@
   soname_spec='${libname}${release}.so$major'
   finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
   shlibpath_var=LD_LIBRARY_PATH
-  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
-  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
+  sys_lib_search_path_spec="/shlib /usr/$with__lib /usr/X11/$with__lib /usr/contrib/$with__lib /$with__lib /usr/local/$with__lib"
+  sys_lib_dlsearch_path_spec="/shlib /usr/$with__lib /usr/local/$with__lib"
   export_dynamic_flag_spec=-rdynamic
-  # the default ld.so.conf also contains /usr/contrib/lib and
-  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
+  # the default ld.so.conf also contains /usr/contrib/$with__lib and
+  # /usr/X11R6/$with__lib (/usr/X11 is a link to /usr/X11R6), but let us allow
   # libtool to hard-code these into programs
   ;;
 
@@ -4042,7 +4042,7 @@
   case $GCC,$host_os in
   yes,cygwin*)
     library_names_spec='$libname.dll.a'
-    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[[.]]/-/g'`${versuffix}.dll'
+    soname_spec='`echo ${libname} | sed -e 's/^$with__lib/cyg/'``echo ${release} | sed -e 's/[[.]]/-/g'`${versuffix}.dll'
     postinstall_cmds='dlpath=`bash 2>&1 -c '\''. $dir/${file}i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
@@ -4056,7 +4056,7 @@
     sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | sed -e "s/^libraries://" -e "s/;/ /g" -e "s,=/,/,g"`
     ;;
   yes,pw32*)
-    library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
+    library_names_spec='`echo ${libname} | sed -e 's/^$with__lib/pw/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
     ;;
   *)
     library_names_spec='${libname}`echo ${release} | sed -e 's/[[.]]/-/g'`${versuffix}.dll $libname.lib'
@@ -4164,7 +4164,7 @@
   sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
   ;;
 
-# No shared lib support for Linux oldld, aout, or coff.
+# No shared $with__lib support for Linux oldld, aout, or coff.
 linux-gnuoldld* | linux-gnuaout* | linux-gnucoff*)
   dynamic_linker=no
   ;;
@@ -4184,7 +4184,7 @@
   # before this can be enabled.
   hardcode_into_libs=yes
 
-  # We used to test for /lib/ld.so.1 and disable shared libraries on
+  # We used to test for /$with__lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
   # most powerpc-linux boxes support dynamic linking these days and
@@ -4273,7 +4273,7 @@
   soname_spec='${libname}${release}.so$major'
   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
   shlibpath_var=LD_LIBRARY_PATH
-  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
+  sys_lib_search_path_spec="/usr/shlib /usr/ccs/$with__lib /usr/$with__lib/cmplrs/cc /usr/$with__lib /usr/local/$with__lib /var/shlib"
   sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
   hardcode_into_libs=yes
   ;;
@@ -4329,7 +4329,7 @@
       need_lib_prefix=no
       need_version=no
       shlibpath_overrides_runpath=no
-      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
+      sys_lib_search_path_spec='/$with__lib /usr/$with__lib /usr/ccs/$with__lib'
       ;;
   esac
   ;;
@@ -4662,7 +4662,7 @@
 # Must we lock files when doing compilation ?
 need_locks=$lt_need_locks
 
-# Do we need the lib prefix for modules?
+# Do we need the $with__lib prefix for modules?
 need_lib_prefix=$need_lib_prefix
 
 # Do we need a version for libraries?
@@ -5353,7 +5353,7 @@
   ;;
 
 bsdi4*)
-  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib)'
+  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic $with__lib)'
   lt_cv_file_magic_cmd='/usr/bin/file -L'
   lt_cv_file_magic_test_file=/shlib/libc.so
   ;;
@@ -5371,7 +5371,7 @@
     lt_cv_file_magic_test_file=`echo /System/Library/Frameworks/System.framework/Versions/*/System | head -1`
     ;;
   *) # Darwin 1.3 on
-    lt_cv_file_magic_test_file='/usr/lib/libSystem.dylib'
+    lt_cv_file_magic_test_file='/usr/$with__lib/libSystem.dylib'
     ;;
   esac
   ;;
@@ -5384,7 +5384,7 @@
       # Let's accept both of them until this is cleared up.
       lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD)/i[[3-9]]86 (compact )?demand paged shared library'
       lt_cv_file_magic_cmd=/usr/bin/file
-      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
+      lt_cv_file_magic_test_file=`echo /usr/$with__lib/libc.so.*`
       ;;
     esac
   else
@@ -5399,14 +5399,14 @@
 hpux10.20*|hpux11*)
   lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|PA-RISC[[0-9]].[[0-9]]) shared library'
   lt_cv_file_magic_cmd=/usr/bin/file
-  lt_cv_file_magic_test_file=/usr/lib/libc.sl
+  lt_cv_file_magic_test_file=/usr/$with__lib/libc.sl
   ;;
 
 irix5* | irix6* | nonstopux*)
   case $host_os in
   irix5* | nonstopux*)
     # this will be overridden with pass_all, but let us keep it just in case
-    lt_cv_deplibs_check_method="file_magic ELF 32-bit MSB dynamic lib MIPS - version 1"
+    lt_cv_deplibs_check_method="file_magic ELF 32-bit MSB dynamic $with__lib MIPS - version 1"
     ;;
   *)
     case $LD in
@@ -5416,7 +5416,7 @@
     *) libmagic=never-match;;
     esac
     # this will be overridden with pass_all, but let us keep it just in case
-    lt_cv_deplibs_check_method="file_magic ELF ${libmagic} MSB mips-[[1234]] dynamic lib MIPS - version 1"
+    lt_cv_deplibs_check_method="file_magic ELF ${libmagic} MSB mips-[[1234]] dynamic $with__lib MIPS - version 1"
     ;;
   esac
   lt_cv_file_magic_test_file=`echo /lib${libsuff}/libc.so*`
@@ -5430,28 +5430,28 @@
     lt_cv_deplibs_check_method=pass_all ;;
   *)
     # glibc up to 2.1.1 does not perform some relocations on ARM
-    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic lib )' ;;
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic $with__lib )' ;;
   esac
-  lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`
+  lt_cv_file_magic_test_file=`echo /$with__lib/libc.so* /$with__lib/libc-*.so`
   ;;
 
 netbsd*)
   if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
-    lt_cv_deplibs_check_method='match_pattern /lib[[^/\.]]+\.so\.[[0-9]]+\.[[0-9]]+$'
+    lt_cv_deplibs_check_method='match_pattern /$with__lib[[^/\.]]+\.so\.[[0-9]]+\.[[0-9]]+$'
   else
-    lt_cv_deplibs_check_method='match_pattern /lib[[^/\.]]+\.so$'
+    lt_cv_deplibs_check_method='match_pattern /$with__lib[[^/\.]]+\.so$'
   fi
   ;;
 
 newos6*)
-  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (executable|dynamic lib)'
+  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (executable|dynamic $with__lib)'
   lt_cv_file_magic_cmd=/usr/bin/file
-  lt_cv_file_magic_test_file=/usr/lib/libnls.so
+  lt_cv_file_magic_test_file=/usr/$with__lib/libnls.so
   ;;
 
 openbsd*)
   lt_cv_file_magic_cmd=/usr/bin/file
-  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
+  lt_cv_file_magic_test_file=`echo /usr/$with__lib/libc.so.*`
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB shared object'
   else
@@ -5472,7 +5472,7 @@
 
 solaris*)
   lt_cv_deplibs_check_method=pass_all
-  lt_cv_file_magic_test_file=/lib/libc.so
+  lt_cv_file_magic_test_file=/$with__lib/libc.so
   ;;
 
 sysv5* | sysv4*uw2*)
@@ -5483,20 +5483,20 @@
 sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
   case $host_vendor in
   motorola)
-    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib) M[[0-9]][[0-9]]* Version [[0-9]]'
-    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic $with__lib) M[[0-9]][[0-9]]* Version [[0-9]]'
+    lt_cv_file_magic_test_file=`echo /usr/$with__lib/libc.so*`
     ;;
   ncr)
     lt_cv_deplibs_check_method=pass_all
     ;;
   sequent)
     lt_cv_file_magic_cmd='/bin/file'
-    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic lib )'
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic $with__lib )'
     ;;
   sni)
     lt_cv_file_magic_cmd='/bin/file'
-    lt_cv_deplibs_check_method="file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB dynamic lib"
-    lt_cv_file_magic_test_file=/lib/libc.so
+    lt_cv_deplibs_check_method="file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB dynamic $with__lib"
+    lt_cv_file_magic_test_file=/$with__lib/libc.so
     ;;
   siemens)
     lt_cv_deplibs_check_method=pass_all
diff -ur php-4.4.1.orig/configure.in php-4.4.1/configure.in
--- php-4.4.1.orig/configure.in	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/configure.in	2006-01-08 11:49:26.000000000 +0000
@@ -248,7 +248,11 @@
 sinclude(Zend/Zend.m4)
 sinclude(TSRM/tsrm.m4)
 
-
+AC_ARG_WITH([_lib],
+[  --with-_lib             library name [[default: lib]]],
+[],
+[with__lib=lib]
+)
 
 divert(2)
 
@@ -314,11 +318,11 @@
 PHP_PROG_SENDMAIL
 dnl Check whether the system uses EBCDIC (not ASCII) as its native codeset
 PHP_EBCDIC
-dnl Check for /usr/pkg/{lib,include} which is where NetBSD puts binary
+dnl Check for /usr/pkg/{$with__lib,include} which is where NetBSD puts binary
 dnl and source packages.  This should be harmless on other OSs.
-if test -d /usr/pkg/include -a -d /usr/pkg/lib ; then
+if test -d /usr/pkg/include -a -d /usr/pkg/$with__lib ; then
        CPPFLAGS="$CPPFLAGS -I/usr/pkg/include"
-       LDFLAGS="$LDFLAGS -L/usr/pkg/lib"
+       LDFLAGS="$LDFLAGS -L/usr/pkg/$with__lib"
 fi
 test -d /usr/ucblib && PHP_ADD_LIBPATH(/usr/ucblib)
 
@@ -684,7 +688,7 @@
 PHP_ARG_WITH(config-file-path,[path to configuration file],
 [  --with-config-file-path=PATH  
                           Sets the path in which to look for php.ini,
-                          defaults to PREFIX/lib], DEFAULT, no)
+                          defaults to PREFIX/$with__lib], DEFAULT, no)
 
 if test "$PHP_CONFIG_FILE_PATH" = "DEFAULT"; then
   case $PHP_LAYOUT in
@@ -906,7 +910,7 @@
 fi
 
 PHP_ARG_WITH(pear, [whether to install PEAR],
-[  --with-pear=DIR         Install PEAR in DIR (default PREFIX/lib/php)
+[  --with-pear=DIR         Install PEAR in DIR (default PREFIX/$with__lib/php)
   --without-pear          Do not install PEAR], DEFAULT, yes)
 
 if test "$PHP_PEAR" != "no"; then
@@ -995,7 +999,7 @@
 test "$program_suffix" = "NONE" && program_suffix=
 
 case $libdir in
-  '${exec_prefix}/lib')
+  '${exec_prefix}/$with__lib')
     libdir=$libdir/php
     ;;
 esac
@@ -1076,7 +1080,7 @@
 AC_SUBST(EXPANDED_PHP_CONFIG_FILE_SCAN_DIR)
 
 if test -n "$php_ldflags_add_usr_lib"; then
-  PHP_RPATHS="$PHP_RPATHS /usr/lib"
+  PHP_RPATHS="$PHP_RPATHS /usr/$with__lib"
 fi
 
 PHP_UTILIZE_RPATHS
diff -ur php-4.4.1.orig/ext/bz2/config.m4 php-4.4.1/ext/bz2/config.m4
--- php-4.4.1.orig/ext/bz2/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/bz2/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -27,12 +27,12 @@
   PHP_CHECK_LIBRARY(bz2, BZ2_bzerror, 
   [
     PHP_ADD_INCLUDE($BZIP_DIR/include)
-    PHP_ADD_LIBRARY_WITH_PATH(bz2, $BZIP_DIR/lib, BZ2_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(bz2, $BZIP_DIR/$with__lib, BZ2_SHARED_LIBADD)
     AC_DEFINE(HAVE_BZ2,1,[ ])
   ], [
     AC_MSG_ERROR(bz2 module requires libbz2 >= 1.0.0)
   ], [
-    -L$BZIP_DIR/lib
+    -L$BZIP_DIR/$with__lib
   ])
 
   PHP_NEW_EXTENSION(bz2, bz2.c, $ext_shared)
diff -ur php-4.4.1.orig/ext/cpdf/config.m4 php-4.4.1/ext/cpdf/config.m4
--- php-4.4.1.orig/ext/cpdf/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/cpdf/config.m4	2006-01-08 11:56:29.000000000 +0000
@@ -4,7 +4,7 @@
   AC_ARG_WITH(jpeg-dir,
   [  --with-jpeg-dir[=DIR]     CPDF: Set the path to libjpeg install prefix.],[
     for i in $withval /usr/local /usr; do
-      if test -f "$i/lib/libjpeg.$SHLIB_SUFFIX_NAME" -o -f "$i/lib/libjpeg.a"; then
+      if test -f "$i/$with__lib/libjpeg.$SHLIB_SUFFIX_NAME" -o -f "$i/$with__lib/libjpeg.a"; then
         CPDF_JPEG_DIR=$i
         break;
       fi
@@ -13,11 +13,11 @@
       AC_MSG_ERROR([libjpeg.(a|so) not found.])
     fi
     PHP_CHECK_LIBRARY(jpeg, jpeg_read_header, [
-      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $CPDF_JPEG_DIR/lib, CPDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $CPDF_JPEG_DIR/$with__lib, CPDF_SHARED_LIBADD)
     ] ,[
       AC_MSG_ERROR([CPDF: Problem with libjpeg.(a|so). Please check config.log for more information.])
     ], [
-      -L$CPDF_JPEG_DIR/lib
+      -L$CPDF_JPEG_DIR/$with__lib
     ])
   ],)
 ])
@@ -26,7 +26,7 @@
   AC_ARG_WITH(tiff-dir,
   [  --with-tiff-dir[=DIR]     CPDF: Set the path to libtiff install prefix.],[
     for i in $withval /usr/local /usr; do
-      if test -f "$i/lib/libtiff.$SHLIB_SUFFIX_NAME" -o -f "$i/lib/libtiff.a"; then
+      if test -f "$i/$with__lib/libtiff.$SHLIB_SUFFIX_NAME" -o -f "$i/$with__lib/libtiff.a"; then
         CPDF_TIFF_DIR=$i
         break;
       fi
@@ -35,11 +35,11 @@
       AC_MSG_ERROR([libtiff.(a|so) not found.])
     fi
     PHP_CHECK_LIBRARY(tiff, TIFFOpen, [
-      PHP_ADD_LIBRARY_WITH_PATH(tiff, $CPDF_TIFF_DIR/lib, CPDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(tiff, $CPDF_TIFF_DIR/$with__lib, CPDF_SHARED_LIBADD)
     ] ,[
       AC_MSG_ERROR([CPDF: Problem with libtiff.(a|so). Please check config.log for more information.])
     ], [
-      -L$CPDF_TIFF_DIR/lib
+      -L$CPDF_TIFF_DIR/$with__lib
     ])
   ],)
 ])
@@ -65,13 +65,13 @@
         ], [
           AC_MSG_ERROR([Cpdflib module requires cpdflib >= 2.])
         ], [
-          -L$i/lib $CPDF_SHARED_LIBADD
+          -L$i/$with__lib $CPDF_SHARED_LIBADD
         ])
       ], [
-        -L$i/lib $CPDF_SHARED_LIBADD
+        -L$i/$with__lib $CPDF_SHARED_LIBADD
       ])
 
-      PHP_ADD_LIBRARY_WITH_PATH($cpdf_libname, $i/lib, CPDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH($cpdf_libname, $i/$with__lib, CPDF_SHARED_LIBADD)
       PHP_ADD_INCLUDE($CPDFLIB_INCLUDE)
       AC_DEFINE(HAVE_CPDFLIB,1,[Whether you have cpdflib])
       break
diff -ur php-4.4.1.orig/ext/crack/config.m4 php-4.4.1/ext/crack/config.m4
--- php-4.4.1.orig/ext/crack/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/crack/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -7,7 +7,7 @@
 
 if test "$PHP_CRACK" != "no"; then
 
-  for i in $PHP_CRACK/lib $PHP_CRACK/cracklib /usr/local/lib /usr/lib; do
+  for i in $PHP_CRACK/$with__lib $PHP_CRACK/cracklib /usr/local/$with__lib /usr/$with__lib; do
     test -f $i/libcrack.$SHLIB_SUFFIX_NAME -o -f $i/libcrack.a && CRACK_LIBDIR=$i && break
     test -f $i/libcrack_krb5.$SHLIB_SUFFIX_NAME -o -f $i/libcrack_krb5.a && CRACK_LIBDIR=$i && break
   done
diff -ur php-4.4.1.orig/ext/curl/config.m4 php-4.4.1/ext/curl/config.m4
--- php-4.4.1.orig/ext/curl/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/curl/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -51,7 +51,7 @@
 
   PHP_ADD_INCLUDE($CURL_DIR/include)
   PHP_EVAL_LIBLINE($CURL_LIBS, CURL_SHARED_LIBADD)
-  PHP_ADD_LIBRARY_WITH_PATH(curl, $CURL_DIR/lib, CURL_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(curl, $CURL_DIR/$with__lib, CURL_SHARED_LIBADD)
 
   PHP_CHECK_LIBRARY(curl,curl_easy_perform, 
   [ 
@@ -59,14 +59,14 @@
   ],[
     AC_MSG_ERROR(There is something wrong. Please check config.log for more information.)
   ],[
-    $CURL_LIBS -L$CURL_DIR/lib
+    $CURL_LIBS -L$CURL_DIR/$with__lib
   ])
 
   PHP_CHECK_LIBRARY(curl,curl_version_info,
   [
     AC_DEFINE(HAVE_CURL_VERSION_INFO,1,[ ])
   ],[],[
-    $CURL_LIBS -L$CURL_DIR/lib
+    $CURL_LIBS -L$CURL_DIR/$with__lib
   ])
 
 dnl  if test "$PHP_CURLWRAPPERS" != "no" ; then
diff -ur php-4.4.1.orig/ext/cyrus/config.m4 php-4.4.1/ext/cyrus/config.m4
--- php-4.4.1.orig/ext/cyrus/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/cyrus/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -16,7 +16,7 @@
   for i in $PHP_CYRUS /usr/local /usr; do
     if test -r $i/include/cyrus/imclient.h && test "$found_cyrus" = "no"; then
       PHP_ADD_INCLUDE($i/include)
-      PHP_ADD_LIBRARY_WITH_PATH(cyrus, $i/lib, CYRUS_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(cyrus, $i/$with__lib, CYRUS_SHARED_LIBADD)
       found_cyrus=yes
       CYRUS_INCPATH=$i/include
       break 2
@@ -50,10 +50,10 @@
     fi
 
     if test "$found_sasl" = "yes"; then
-      if test -f $i/lib/libsasl2.a || test -f $i/lib/libsasl2.$SHLIB_SUFFIX_NAME; then
-        PHP_ADD_LIBRARY_WITH_PATH(sasl2, $i/lib, CYRUS_SHARED_LIBADD)
+      if test -f $i/$with__lib/libsasl2.a || test -f $i/$with__lib/libsasl2.$SHLIB_SUFFIX_NAME; then
+        PHP_ADD_LIBRARY_WITH_PATH(sasl2, $i/$with__lib, CYRUS_SHARED_LIBADD)
       else
-        PHP_ADD_LIBRARY_WITH_PATH(sasl, $i/lib, CYRUS_SHARED_LIBADD)
+        PHP_ADD_LIBRARY_WITH_PATH(sasl, $i/$with__lib, CYRUS_SHARED_LIBADD)
       fi
       break 2
     fi
@@ -70,8 +70,8 @@
   if test "$PHP_OPENSSL" = "no"; then
     for i in $PHP_CYRUS /usr/local /usr; do
       if test -r $i/include/openssl/ssl.h; then
-        PHP_ADD_LIBRARY_WITH_PATH(ssl, $i/lib, CYRUS_SHARED_LIBADD)
-        PHP_ADD_LIBRARY_WITH_PATH(crypto, $i/lib, CYRUS_SHARED_LIBADD)
+        PHP_ADD_LIBRARY_WITH_PATH(ssl, $i/$with__lib, CYRUS_SHARED_LIBADD)
+        PHP_ADD_LIBRARY_WITH_PATH(crypto, $i/$with__lib, CYRUS_SHARED_LIBADD)
         break 2
       fi
     done
diff -ur php-4.4.1.orig/ext/dba/config.m4 php-4.4.1/ext/dba/config.m4
--- php-4.4.1.orig/ext/dba/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/dba/config.m4	2006-01-08 11:51:20.000000000 +0000
@@ -21,7 +21,7 @@
 dnl Assign INCLUDE/LFLAGS from PREFIX
 AC_DEFUN([PHP_DBA_STD_ASSIGN],[
   if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
-    THIS_LFLAGS=$THIS_PREFIX/lib
+    THIS_LFLAGS=$THIS_PREFIX/$with__lib
   fi
 ])
 
@@ -85,7 +85,7 @@
         AC_DEFINE_UNQUOTED(GDBM_INCLUDE_FILE, "$THIS_INCLUDE", [ ])
         AC_DEFINE(DBA_GDBM, 1, [ ]) 
         THIS_LIBS=gdbm
-      ], [], [-L$THIS_PREFIX/lib])
+      ], [], [-L$THIS_PREFIX/$with__lib])
     fi
     
     PHP_DBA_STD_ASSIGN
@@ -117,7 +117,7 @@
           AC_DEFINE_UNQUOTED(NDBM_INCLUDE_FILE, "$THIS_INCLUDE", [ ])
           AC_DEFINE(DBA_NDBM, 1, [ ]) 
           THIS_LIBS=$LIB
-        ], [], [-L$THIS_PREFIX/lib])
+        ], [], [-L$THIS_PREFIX/$with__lib])
         if test -n "$THIS_LIBS"; then
           break
         fi
@@ -135,8 +135,8 @@
 dnl parameters(version, library list, function)
 AC_DEFUN([PHP_DBA_DB_CHECK],[
   for LIB in $2; do
-    if test -f $THIS_PREFIX/lib/lib$LIB.a -o -f $THIS_PREFIX/lib/lib$LIB.$SHLIB_SUFFIX_NAME; then
-      PHP_TEMP_LDFLAGS(-L$THIS_PREFIX/lib, -l$LIB,[
+    if test -f $THIS_PREFIX/$with__lib/lib$LIB.a -o -f $THIS_PREFIX/$with__lib/lib$LIB.$SHLIB_SUFFIX_NAME; then
+      PHP_TEMP_LDFLAGS(-L$THIS_PREFIX/$with__lib, -l$LIB,[
         AC_TRY_LINK([
 #include "$THIS_INCLUDE"
         ],[
@@ -328,7 +328,7 @@
           fi
           AC_DEFINE(DBA_DBM, 1, [ ]) 
           THIS_LIBS=$LIB
-        ], [], [-L$THIS_PREFIX/lib])
+        ], [], [-L$THIS_PREFIX/$with__lib])
         if test -n "$THIS_LIBS"; then
           break
         fi
@@ -370,7 +370,7 @@
           AC_DEFINE_UNQUOTED(CDB_INCLUDE_FILE, "$THIS_INCLUDE", [ ])
           AC_DEFINE(DBA_CDB, 1, [ ]) 
           THIS_LIBS=$LIB
-        ], [], [-L$THIS_PREFIX/lib])
+        ], [], [-L$THIS_PREFIX/$with__lib])
         if test -n "$THIS_LIBS"; then
           break
         fi
diff -ur php-4.4.1.orig/ext/domxml/config.m4 php-4.4.1/ext/domxml/config.m4
--- php-4.4.1.orig/ext/domxml/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/domxml/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -50,7 +50,7 @@
 
   PHP_DOM_CHECK_VERSION
 
-  if test -f $DOMXML_DIR/lib/libxml2.a -o -f $DOMXML_DIR/lib/libxml2.$SHLIB_SUFFIX_NAME ; then
+  if test -f $DOMXML_DIR/$with__lib/libxml2.a -o -f $DOMXML_DIR/$with__lib/libxml2.$SHLIB_SUFFIX_NAME ; then
     DOM_LIBNAME=xml2
   else
     DOM_LIBNAME=xml
@@ -62,7 +62,7 @@
     DOM_LIBS=`$XML2_CONFIG --libs`
     PHP_EVAL_LIBLINE($DOM_LIBS, DOMXML_SHARED_LIBADD)
   else 
-    PHP_ADD_LIBRARY_WITH_PATH($DOM_LIBNAME, $DOMXML_DIR/lib, DOMXML_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH($DOM_LIBNAME, $DOMXML_DIR/$with__lib, DOMXML_SHARED_LIBADD)
   fi
 
   PHP_ADD_INCLUDE($DOMXML_DIR/include$DOMXML_DIR_ADD)
@@ -70,7 +70,7 @@
   if test "$PHP_ZLIB_DIR" = "no"; then
     AC_MSG_ERROR(DOMXML requires ZLIB. Use --with-zlib-dir=<DIR>)
   else
-    PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/lib, DOMXML_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/$with__lib, DOMXML_SHARED_LIBADD)
   fi
   
   AC_DEFINE(HAVE_DOMXML,1,[ ])
@@ -137,7 +137,7 @@
 
   PHP_DOM_XSLT_CHECK_VERSION
 
-  PHP_ADD_LIBRARY_WITH_PATH(xslt, $DOMXSLT_DIR/lib, DOMXML_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(xslt, $DOMXSLT_DIR/$with__lib, DOMXML_SHARED_LIBADD)
 
   PHP_ADD_INCLUDE($DOMXSLT_DIR/include)
 
@@ -145,17 +145,17 @@
     AC_MSG_ERROR(DOMXSLT requires DOMXML. Use --with-dom=<DIR>)
   fi
   
-  if test -f $DOMXML_DIR/lib/libxml2.a -o -f $DOMXML_DIR/lib/libxml2.$SHLIB_SUFFIX_NAME ; then
+  if test -f $DOMXML_DIR/$with__lib/libxml2.a -o -f $DOMXML_DIR/$with__lib/libxml2.$SHLIB_SUFFIX_NAME ; then
     DOM_LIBNAME=xml2
   else
     DOM_LIBNAME=xml
   fi
 
-  PHP_ADD_LIBRARY_WITH_PATH($DOM_LIBNAME, $DOMXML_DIR/lib, DOMXML_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH($DOM_LIBNAME, $DOMXML_DIR/$with__lib, DOMXML_SHARED_LIBADD)
   PHP_ADD_INCLUDE($DOMXML_DIR/include$DOMXML_DIR_ADD)
 
-  if test -f $DOMXML_DIR/lib/libxsltbreakpoint.a -o -f $DOMXML_DIR/lib/libxsltbreakpoint.$SHLIB_SUFFIX_NAME ; then
-    PHP_ADD_LIBRARY_WITH_PATH(xsltbreakpoint, $DOMXML_DIR/lib, DOMXML_SHARED_LIBADD)
+  if test -f $DOMXML_DIR/$with__lib/libxsltbreakpoint.a -o -f $DOMXML_DIR/$with__lib/libxsltbreakpoint.$SHLIB_SUFFIX_NAME ; then
+    PHP_ADD_LIBRARY_WITH_PATH(xsltbreakpoint, $DOMXML_DIR/$with__lib, DOMXML_SHARED_LIBADD)
   fi
 
   AC_DEFINE(HAVE_DOMXSLT,1,[ ])
@@ -187,7 +187,7 @@
 
   PHP_DOM_EXSLT_CHECK_VERSION
 
-  PHP_ADD_LIBRARY_WITH_PATH(exslt, $DOMEXSLT_DIR/lib, DOMXML_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(exslt, $DOMEXSLT_DIR/$with__lib, DOMXML_SHARED_LIBADD)
 
   PHP_ADD_INCLUDE($DOMEXSLT_DIR/include)
 
diff -ur php-4.4.1.orig/ext/fbsql/config.m4 php-4.4.1/ext/fbsql/config.m4
--- php-4.4.1.orig/ext/fbsql/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/fbsql/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -13,7 +13,7 @@
   FBSQL_INSTALLATION_DIR=""
   if test "$PHP_FBSQL" = "yes"; then
 
-    for i in /Local/Library /usr/local /usr /opt /Library /usr/lib; do
+    for i in /Local/Library /usr/local /usr /opt /Library /usr/$with__lib; do
       if test -f $i/FrontBase/include/FBCAccess/FBCAccess.h; then
         FBSQL_INSTALLATION_DIR=$i/FrontBase
         break
@@ -33,11 +33,11 @@
     fi
   fi  
 
-  if test ! -r "$FBSQL_INSTALLATION_DIR/lib/libFBCAccess.a"; then
-     AC_MSG_ERROR(Could not find $FBSQL_INSTALLATION_DIR/lib/libFBCAccess.a)
+  if test ! -r "$FBSQL_INSTALLATION_DIR/$with__lib/libFBCAccess.a"; then
+     AC_MSG_ERROR(Could not find $FBSQL_INSTALLATION_DIR/$with__lib/libFBCAccess.a)
   fi
 
-  PHP_ADD_LIBRARY_WITH_PATH(FBCAccess, $FBSQL_INSTALLATION_DIR/lib, FBSQL_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(FBCAccess, $FBSQL_INSTALLATION_DIR/$with__lib, FBSQL_SHARED_LIBADD)
   PHP_ADD_INCLUDE($FBSQL_INSTALLATION_DIR/include)
   PHP_SUBST(FBSQL_SHARED_LIBADD)
 fi
diff -ur php-4.4.1.orig/ext/fdf/config.m4 php-4.4.1/ext/fdf/config.m4
--- php-4.4.1.orig/ext/fdf/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/fdf/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -49,7 +49,7 @@
 
   FDFLIBRARY=""
   for file in fdftk FdfTk; do
-    for dir in $FDFTK_DIR/lib $FDFTK_DIR/HeadersAndLibraries/$libtype/C; do
+    for dir in $FDFTK_DIR/$with__lib $FDFTK_DIR/HeadersAndLibraries/$libtype/C; do
       if test -r $dir/lib$file.so; then
         PHP_CHECK_LIBRARY($file, FDFOpen, [FDFLIBRARY=$file], [], [-L$dir -lm])
         if test "$FDFLIBRARY"; then
diff -ur php-4.4.1.orig/ext/gd/config.m4 php-4.4.1/ext/gd/config.m4
--- php-4.4.1.orig/ext/gd/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/gd/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -51,7 +51,7 @@
   if test "$PHP_JPEG_DIR" != "no"; then
 
     for i in $PHP_JPEG_DIR /usr/local /usr; do
-      test -f $i/lib/libjpeg.$SHLIB_SUFFIX_NAME -o -f $i/lib/libjpeg.a && GD_JPEG_DIR=$i && break
+      test -f $i/$with__lib/libjpeg.$SHLIB_SUFFIX_NAME -o -f $i/$with__lib/libjpeg.a && GD_JPEG_DIR=$i && break
     done
 
     if test -z "$GD_JPEG_DIR"; then
@@ -61,11 +61,11 @@
     PHP_CHECK_LIBRARY(jpeg,jpeg_read_header,
     [
       PHP_ADD_INCLUDE($GD_JPEG_DIR/include)
-      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $GD_JPEG_DIR/lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $GD_JPEG_DIR/$with__lib, GD_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([Problem with libjpeg.(a|so). Please check config.log for more information.]) 
     ],[
-      -L$GD_JPEG_DIR/lib
+      -L$GD_JPEG_DIR/$with__lib
     ])
   else 
     AC_MSG_RESULT([If configure fails try --with-jpeg-dir=<DIR>])
@@ -76,7 +76,7 @@
   if test "$PHP_PNG_DIR" != "no"; then
 
     for i in $PHP_PNG_DIR /usr/local /usr; do
-      test -f $i/lib/libpng.$SHLIB_SUFFIX_NAME -o -f $i/lib/libpng.a && GD_PNG_DIR=$i && break
+      test -f $i/$with__lib/libpng.$SHLIB_SUFFIX_NAME -o -f $i/$with__lib/libpng.a && GD_PNG_DIR=$i && break
     done
 
     if test -z "$GD_PNG_DIR"; then
@@ -94,12 +94,12 @@
     PHP_CHECK_LIBRARY(png,png_write_image,
     [
       PHP_ADD_INCLUDE($GD_PNG_DIR/include)
-      PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/lib, GD_SHARED_LIBADD)
-      PHP_ADD_LIBRARY_WITH_PATH(png, $GD_PNG_DIR/lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/$with__lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(png, $GD_PNG_DIR/$with__lib, GD_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information.]) 
     ],[
-      -L$PHP_ZLIB_DIR/lib -lz -L$GD_PNG_DIR/lib
+      -L$PHP_ZLIB_DIR/$with__lib -lz -L$GD_PNG_DIR/$with__lib
     ])
 
   else 
@@ -111,7 +111,7 @@
   if test "$PHP_XPM_DIR" != "no"; then
 
     for i in $PHP_XPM_DIR /usr/local /usr/X11R6 /usr; do
-      test -f $i/lib/libXpm.$SHLIB_SUFFIX_NAME -o -f $i/lib/libXpm.a && GD_XPM_DIR=$i && break
+      test -f $i/$with__lib/libXpm.$SHLIB_SUFFIX_NAME -o -f $i/$with__lib/libXpm.a && GD_XPM_DIR=$i && break
     done
 
     if test -z "$GD_XPM_DIR"; then
@@ -129,12 +129,12 @@
     PHP_CHECK_LIBRARY(Xpm,XpmFreeXpmImage, 
     [
       PHP_ADD_INCLUDE($GD_XPM_INC)
-      PHP_ADD_LIBRARY_WITH_PATH(Xpm, $GD_XPM_DIR/lib, GD_SHARED_LIBADD)
-      PHP_ADD_LIBRARY_WITH_PATH(X11, $GD_XPM_DIR/lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(Xpm, $GD_XPM_DIR/$with__lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(X11, $GD_XPM_DIR/$with__lib, GD_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information.]) 
     ],[
-      -L$GD_XPM_DIR/lib -lX11
+      -L$GD_XPM_DIR/$with__lib -lX11
     ])
   else 
     AC_MSG_RESULT(If configure fails try --with-xpm-dir=<DIR>)
@@ -163,7 +163,7 @@
       fi
       if test -n "$TTF_DIR" ; then
         AC_DEFINE(HAVE_LIBTTF,1,[ ])
-        PHP_ADD_LIBRARY_WITH_PATH(ttf, $TTF_DIR/lib, GD_SHARED_LIBADD)
+        PHP_ADD_LIBRARY_WITH_PATH(ttf, $TTF_DIR/$with__lib, GD_SHARED_LIBADD)
       fi
       if test -z "$TTF_INC_DIR"; then
         TTF_INC_DIR=$TTF_DIR/include
@@ -187,7 +187,7 @@
     done
     
     if test -n "$FREETYPE2_DIR" ; then
-      PHP_ADD_LIBRARY_WITH_PATH(freetype, $FREETYPE2_DIR/lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(freetype, $FREETYPE2_DIR/$with__lib, GD_SHARED_LIBADD)
       PHP_ADD_INCLUDE($FREETYPE2_DIR/include)
       PHP_ADD_INCLUDE($FREETYPE2_INC_DIR)
       AC_DEFINE(USE_GD_IMGSTRTTF, 1, [ ])
@@ -215,11 +215,11 @@
     [
       AC_DEFINE(HAVE_LIBT1,1,[ ])
       PHP_ADD_INCLUDE($GD_T1_DIR/include)
-      PHP_ADD_LIBRARY_WITH_PATH(t1, $GD_T1_DIR/lib, GD_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(t1, $GD_T1_DIR/$with__lib, GD_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([Problem with libt1.(a|so). Please check config.log for more information.]) 
     ],[
-      -L$GD_T1_DIR/lib
+      -L$GD_T1_DIR/$with__lib
     ])
   fi
 ])
@@ -365,7 +365,7 @@
   done
 
 dnl Library path
-  for i in lib/gd1.3 lib/gd lib gd1.3 gd ""; do
+  for i in $with__lib/gd1.3 $with__lib/gd $with__lib gd1.3 gd ""; do
     test -f "$PHP_GD/$i/libgd.$SHLIB_SUFFIX_NAME" -o -f "$PHP_GD/$i/libgd.a" && GD_LIB="$PHP_GD/$i"
   done
 
diff -ur php-4.4.1.orig/ext/gettext/config.m4 php-4.4.1/ext/gettext/config.m4
--- php-4.4.1.orig/ext/gettext/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/gettext/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -14,7 +14,7 @@
     AC_MSG_ERROR(Cannot locate header file libintl.h)
   fi
 
-  GETTEXT_LIBDIR=$GETTEXT_DIR/lib
+  GETTEXT_LIBDIR=$GETTEXT_DIR/$with__lib
   GETTEXT_INCDIR=$GETTEXT_DIR/include
   
   O_LDFLAGS=$LDFLAGS
diff -ur php-4.4.1.orig/ext/gmp/config.m4 php-4.4.1/ext/gmp/config.m4
--- php-4.4.1.orig/ext/gmp/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/gmp/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -21,13 +21,13 @@
     [],[
       AC_MSG_ERROR([GNU MP Library version 4.1.2 or greater required.])
     ],[
-      -L$GMP_DIR/lib
+      -L$GMP_DIR/$with__lib
     ])
   ],[
-    -L$GMP_DIR/lib
+    -L$GMP_DIR/$with__lib
   ])
 
-  PHP_ADD_LIBRARY_WITH_PATH(gmp, $GMP_DIR/lib, GMP_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(gmp, $GMP_DIR/$with__lib, GMP_SHARED_LIBADD)
   PHP_ADD_INCLUDE($GMP_DIR/include)
 
   PHP_NEW_EXTENSION(gmp, gmp.c, $ext_shared)
diff -ur php-4.4.1.orig/ext/hwapi/config.m4 php-4.4.1/ext/hwapi/config.m4
--- php-4.4.1.orig/ext/hwapi/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/hwapi/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -23,7 +23,7 @@
 
   PHP_ADD_INCLUDE($HWAPI_DIR/include/hwapi)
   PHP_SUBST(HWAPI_SHARED_LIBADD)
-  PHP_ADD_LIBRARY_WITH_PATH(hwapi, $HWAPI_DIR/lib, HWAPI_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(hwapi, $HWAPI_DIR/$with__lib, HWAPI_SHARED_LIBADD)
   AC_DEFINE(HAVE_HWAPI,1,[ ])
 
   PHP_REQUIRE_CXX
diff -ur php-4.4.1.orig/ext/iconv/config.m4 php-4.4.1/ext/iconv/config.m4
--- php-4.4.1.orig/ext/iconv/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/iconv/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -24,7 +24,7 @@
     fi
 
     CFLAGS="-I$PHP_ICONV_PREFIX/include $CFLAGS"
-    LDFLAGS="-L$PHP_ICONV_PREFIX/lib $LDFLAGS"
+    LDFLAGS="-L$PHP_ICONV_PREFIX/$with__lib $LDFLAGS"
 
     if test -r $PHP_ICONV_PREFIX/include/giconv.h; then
       PHP_ICONV_H_PATH="$PHP_ICONV_PREFIX/include/giconv.h"
diff -ur php-4.4.1.orig/ext/imap/config.m4 php-4.4.1/ext/imap/config.m4
--- php-4.4.1.orig/ext/imap/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/imap/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -160,13 +160,13 @@
 
     if test -r "$IMAP_DIR/c-client/c-client.a"; then
       ln -s "$IMAP_DIR/c-client/c-client.a" "$IMAP_DIR/c-client/libc-client.a" >/dev/null 2>&1
-    elif test -r "$IMAP_DIR/lib/c-client.a"; then
-      ln -s "$IMAP_DIR/lib/c-client.a" "$IMAP_DIR/lib/libc-client.a" >/dev/null 2>&1
+    elif test -r "$IMAP_DIR/$with__lib/c-client.a"; then
+      ln -s "$IMAP_DIR/$with__lib/c-client.a" "$IMAP_DIR/$with__lib/libc-client.a" >/dev/null 2>&1
     fi
 
     for lib in c-client4 c-client imap; do
       IMAP_LIB=$lib
-      IMAP_LIB_CHK(lib)
+      IMAP_LIB_CHK($with__lib)
       IMAP_LIB_CHK(c-client)
     done
 
diff -ur php-4.4.1.orig/ext/ingres_ii/config.m4 php-4.4.1/ext/ingres_ii/config.m4
--- php-4.4.1.orig/ext/ingres_ii/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ingres_ii/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -23,10 +23,10 @@
     AC_MSG_ERROR(Cannot find iiapi.h under $II_DIR/files)
   fi
 
-  if test -r $II_DIR/lib/libiiapi.a; then
-    II_LIB_DIR=$II_DIR/lib
+  if test -r $II_DIR/$with__lib/libiiapi.a; then
+    II_LIB_DIR=$II_DIR/$with__lib
   else
-    AC_MSG_ERROR(Cannot find libiiapi.a under $II_DIR/lib)
+    AC_MSG_ERROR(Cannot find libiiapi.a under $II_DIR/$with__lib)
   fi
 
   PHP_ADD_LIBRARY_WITH_PATH(iiapi.1, $II_LIB_DIR, II_SHARED_LIBADD)
diff -ur php-4.4.1.orig/ext/interbase/config.m4 php-4.4.1/ext/interbase/config.m4
--- php-4.4.1.orig/ext/interbase/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/interbase/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -9,10 +9,10 @@
 if test "$PHP_INTERBASE" != "no"; then
   if test "$PHP_INTERBASE" = "yes"; then
     IBASE_INCDIR=/usr/interbase/include
-    IBASE_LIBDIR=/usr/interbase/lib
+    IBASE_LIBDIR=/usr/interbase/$with__lib
   else
     IBASE_INCDIR=$PHP_INTERBASE/include
-    IBASE_LIBDIR=$PHP_INTERBASE/lib
+    IBASE_LIBDIR=$PHP_INTERBASE/$with__lib
   fi
 
   PHP_CHECK_LIBRARY(gds, isc_detach_database,
diff -ur php-4.4.1.orig/ext/ircg/config.m4 php-4.4.1/ext/ircg/config.m4
--- php-4.4.1.orig/ext/ircg/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ircg/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -26,7 +26,7 @@
   
   PHP_EVAL_LIBLINE(`$IRCG_CONFIG --ldflags`)
   PHP_EVAL_INCLINE(`$IRCG_CONFIG --cppflags`)
-  PHP_ADD_LIBRARY_WITH_PATH(ircg, $PHP_IRCG/lib)
+  PHP_ADD_LIBRARY_WITH_PATH(ircg, $PHP_IRCG/$with__lib)
   PHP_ADD_INCLUDE($PHP_IRCG/include)
   if test "$PHP_SAPI" = "thttpd"; then
     AC_DEFINE(IRCG_WITH_THTTPD, 1, [Whether thttpd is available])
diff -ur php-4.4.1.orig/ext/java/config.m4 php-4.4.1/ext/java/config.m4
--- php-4.4.1.orig/ext/java/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/java/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -57,17 +57,17 @@
 
 AC_DEFUN([JAVA_CHECK_LIB], [
  AC_MSG_CHECKING([Checking for libjava])
- if test -d $PHP_JAVA/lib/kaffe; then
-   PHP_ADD_LIBPATH($PHP_JAVA/lib)
+ if test -d $PHP_JAVA/$with__lib/kaffe; then
+   PHP_ADD_LIBPATH($PHP_JAVA/$with__lib)
    JAVA_CFLAGS=-DKAFFE
    JAVA_INCLUDE=-I$PHP_JAVA/include/kaffe
    JAVA_CLASSPATH=$PHP_JAVA/share/kaffe/Klasses.jar
    JAVA_LIB=kaffevm
-   JAVA_LIBPATH=$PHP_JAVA/lib/kaffe
+   JAVA_LIBPATH=$PHP_JAVA/$with__lib/kaffe
    java_libext=kaffevm
 
-   test -f $PHP_JAVA/lib/$JAVA_LIB       && JAVA_LIBPATH=$PHP_JAVA/lib
-   test -f $PHP_JAVA/lib/kaffe/$JAVA_LIB && JAVA_LIBPATH=$PHP_JAVA/lib/kaffe
+   test -f $PHP_JAVA/$with__lib/$JAVA_LIB       && JAVA_LIBPATH=$PHP_JAVA/$with__lib
+   test -f $PHP_JAVA/$with__lib/kaffe/$JAVA_LIB && JAVA_LIBPATH=$PHP_JAVA/$with__lib/kaffe
 
    dnl
    dnl accomodate old versions of kaffe which don't support jar
@@ -75,22 +75,22 @@
    if kaffe -version 2>&1 | grep 1.0b > /dev/null; then
      JAVA_JAR='zip -q0'
    fi
- elif test -f $PHP_JAVA/lib/$java_libext; then
+ elif test -f $PHP_JAVA/$with__lib/$java_libext; then
    JAVA_LIB=java
-   JAVA_LIBPATH=$PHP_JAVA/lib
+   JAVA_LIBPATH=$PHP_JAVA/$with__lib
    JAVA_INCLUDE=-I$PHP_JAVA/include
 
-   test -f $PHP_JAVA/lib/classes.zip && JAVA_CFLAGS=-DJNI_11
-   test -f $PHP_JAVA/lib/jvm.jar     && JAVA_CFLAGS=-DJNI_12
-   test -f $PHP_JAVA/lib/classes.zip && JAVA_CLASSPATH=$PHP_JAVA/lib/classes.zip
-   test -f $PHP_JAVA/lib/jvm.jar     && JAVA_CLASSPATH=$PHP_JAVA/lib/jvm.jar
+   test -f $PHP_JAVA/$with__lib/classes.zip && JAVA_CFLAGS=-DJNI_11
+   test -f $PHP_JAVA/$with__lib/jvm.jar     && JAVA_CFLAGS=-DJNI_12
+   test -f $PHP_JAVA/$with__lib/classes.zip && JAVA_CLASSPATH=$PHP_JAVA/$with__lib/classes.zip
+   test -f $PHP_JAVA/$with__lib/jvm.jar     && JAVA_CLASSPATH=$PHP_JAVA/$with__lib/jvm.jar
 
    for i in $PHP_JAVA/include/*; do
      test -f $i/jni_md.h && JAVA_INCLUDE="$JAVA_INCLUDE $i"
    done
    dnl
    dnl sample JDK v 1.4 path
-   dnl /usr/java/j2sdk1.4.0_01/jre/lib/i386/libjava.so
+   dnl /usr/java/j2sdk1.4.0_01/jre/$with__lib/i386/libjava.so
    dnl
  else
    dnl
diff -ur php-4.4.1.orig/ext/ldap/config.m4 php-4.4.1/ext/ldap/config.m4
--- php-4.4.1.orig/ext/ldap/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ldap/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -6,15 +6,15 @@
   if test -f $1/include/ldap.h; then
     LDAP_DIR=$1
     LDAP_INCDIR=$1/include
-    LDAP_LIBDIR=$1/lib
+    LDAP_LIBDIR=$1/$with__lib
   elif test -f $1/include/umich-ldap/ldap.h; then
     LDAP_DIR=$1
     LDAP_INCDIR=$1/include/umich-ldap
-    LDAP_LIBDIR=$1/lib
+    LDAP_LIBDIR=$1/$with__lib
   elif test -f $1/ldap/public/ldap.h; then
     LDAP_DIR=$1
     LDAP_INCDIR=$1/ldap/public
-    LDAP_LIBDIR=$1/lib
+    LDAP_LIBDIR=$1/$with__lib
   fi
 ])
 
diff -ur php-4.4.1.orig/ext/mbstring/config.m4 php-4.4.1/ext/mbstring/config.m4
--- php-4.4.1.orig/ext/mbstring/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mbstring/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -168,11 +168,11 @@
     fi
 
     PHP_CHECK_LIBRARY(mbfl, mbfl_buffer_converter_new, [
-      PHP_ADD_LIBRARY_WITH_PATH(mbfl, $PHP_LIBMBFL/lib, MBSTRING_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(mbfl, $PHP_LIBMBFL/$with__lib, MBSTRING_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([Problem with libmbfl. Please check config.log for more information.])
     ], [
-      -LPHP_LIBMBFL/lib
+      -LPHP_LIBMBFL/$with__lib
     ])
   fi
 ])
diff -ur php-4.4.1.orig/ext/mcal/config.m4 php-4.4.1/ext/mcal/config.m4
--- php-4.4.1.orig/ext/mcal/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mcal/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -19,7 +19,7 @@
     fi
   done
 
-  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/lib $MCAL_DIR/lib/mcal $MCAL_DIR/lib; do
+  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/$with__lib $MCAL_DIR/$with__lib/mcal $MCAL_DIR/$with__lib; do
     if test -r "$i/libmcal.a"; then
       MCAL_LIBRARY=$i
     fi
@@ -32,7 +32,7 @@
   done
 
   if test ! -f "$MCAL_LIBRARY/libmcal.a"; then
-    AC_MSG_ERROR(Unable to locate your libmcal library files - libmcal.a should be in the directory you specify or in the lib/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH)
+    AC_MSG_ERROR(Unable to locate your libmcal library files - libmcal.a should be in the directory you specify or in the $with__lib/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH)
   fi
 
   PHP_ADD_INCLUDE($MCAL_INCLUDE)
diff -ur php-4.4.1.orig/ext/mcrypt/config.m4 php-4.4.1/ext/mcrypt/config.m4
--- php-4.4.1.orig/ext/mcrypt/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mcrypt/config.m4	2006-01-08 12:05:35.000000000 +0000
@@ -23,7 +23,7 @@
     [
       AC_DEFINE(HAVE_MCRYPT_GENERIC_DEINIT,1,[ ])
     ],[],[
-      -L$MCRYPT_DIR/lib -lltdl
+      -L$MCRYPT_DIR/$with__lib -lltdl
     ])
 
   ],[
@@ -35,7 +35,7 @@
       [
         AC_DEFINE(HAVE_MCRYPT_GENERIC_DEINIT,1,[ ])
       ],[],[
-        -L$MCRYPT_DIR/lib
+        -L$MCRYPT_DIR/$with__lib
       ])
     ],[
       PHP_CHECK_LIBRARY(mcrypt, init_mcrypt, 
@@ -44,16 +44,16 @@
       ],[
         AC_MSG_ERROR([Sorry, I was not able to diagnose which libmcrypt version you have installed.])
       ],[
-        -L$MCRYPT_DIR/lib
+        -L$MCRYPT_DIR/$with__lib
       ])
     ],[
-      -L$MCRYPT_DIR/lib
+      -L$MCRYPT_DIR/$with__lib
     ])
   ],[
     -L$MCRYPT_DIR/lib -lltdl
   ])
 
-  PHP_ADD_LIBRARY_WITH_PATH(mcrypt, $MCRYPT_DIR/lib, MCRYPT_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(mcrypt, $MCRYPT_DIR/$with__lib, MCRYPT_SHARED_LIBADD)
   PHP_ADD_INCLUDE($MCRYPT_DIR/include)
 
   PHP_NEW_EXTENSION(mcrypt, mcrypt.c, $ext_shared)
diff -ur php-4.4.1.orig/ext/mcve/config.m4 php-4.4.1/ext/mcve/config.m4
--- php-4.4.1.orig/ext/mcve/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mcve/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -68,7 +68,7 @@
   CPPFLAGS=$saved_CPPFLAGS
 
   PHP_ADD_INCLUDE($MCVE_DIR/include)
-  PHP_ADD_LIBRARY_WITH_PATH(mcve, $MCVE_DIR/lib, MCVE_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(mcve, $MCVE_DIR/$with__lib, MCVE_SHARED_LIBADD)
 
   dnl Build test. Check for libmcve or libmonetra
   dnl libmonetra_compat.h handle's MCVE_ -> M_ conversion
diff -ur php-4.4.1.orig/ext/mhash/config.m4 php-4.4.1/ext/mhash/config.m4
--- php-4.4.1.orig/ext/mhash/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mhash/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -15,7 +15,7 @@
   fi
 
   PHP_ADD_INCLUDE($MHASH_DIR/include)
-  PHP_ADD_LIBRARY_WITH_PATH(mhash, $MHASH_DIR/lib, MHASH_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(mhash, $MHASH_DIR/$with__lib, MHASH_SHARED_LIBADD)
 
   PHP_NEW_EXTENSION(mhash, mhash.c, $ext_shared)
   PHP_SUBST(MHASH_SHARED_LIBADD)
diff -ur php-4.4.1.orig/ext/ming/config.m4 php-4.4.1/ext/ming/config.m4
--- php-4.4.1.orig/ext/ming/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ming/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -9,7 +9,7 @@
   AC_CHECK_LIB(m, sin)
 
   for i in $PHP_MING /usr/local /usr; do
-    if test -f $i/lib/libming.$SHLIB_SUFFIX_NAME -o -f $i/lib/libming.a; then
+    if test -f $i/$with__lib/libming.$SHLIB_SUFFIX_NAME -o -f $i/$with__lib/libming.a; then
       MING_DIR=$i
     fi
   done
@@ -33,11 +33,11 @@
   ],[
     AC_MSG_ERROR([Ming library 0.2a or greater required.])
   ],[
-    -L$MING_DIR/lib
+    -L$MING_DIR/$with__lib
   ])
   
   PHP_ADD_INCLUDE($MING_INC_DIR)
-  PHP_ADD_LIBRARY_WITH_PATH(ming, $MING_DIR/lib, MING_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(ming, $MING_DIR/$with__lib, MING_SHARED_LIBADD)
 
   AC_MSG_CHECKING([for destroySWFBlock])
   AC_TRY_RUN([
diff -ur php-4.4.1.orig/ext/mnogosearch/config.m4 php-4.4.1/ext/mnogosearch/config.m4
--- php-4.4.1.orig/ext/mnogosearch/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mnogosearch/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -13,11 +13,11 @@
     if test "$PHP_MNOGOSEARCH" = "yes"; then
       MNOGOSEARCH_BINDIR=/usr/local/mnogosearch/bin
       MNOGOSEARCH_INCDIR=/usr/local/mnogosearch/include
-      MNOGOSEARCH_LIBDIR=/usr/local/mnogosearch/lib
+      MNOGOSEARCH_LIBDIR=/usr/local/mnogosearch/$with__lib
     else
       MNOGOSEARCH_BINDIR=$PHP_MNOGOSEARCH/bin
       MNOGOSEARCH_INCDIR=$PHP_MNOGOSEARCH/include
-      MNOGOSEARCH_LIBDIR=$PHP_MNOGOSEARCH/lib
+      MNOGOSEARCH_LIBDIR=$PHP_MNOGOSEARCH/$with__lib
     fi
     
     AC_MSG_CHECKING(for mnoGoSearch version)    
diff -ur php-4.4.1.orig/ext/msession/config.m4 php-4.4.1/ext/msession/config.m4
--- php-4.4.1.orig/ext/msession/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/msession/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -6,12 +6,12 @@
 [  --with-msession[=DIR]   Include msession support])
  
 if test "$PHP_MSESSION" != "no"; then
-	if test -r $PHP_MSESSION/lib/libphoenix.a; then
+	if test -r $PHP_MSESSION/$with__lib/libphoenix.a; then
 		PHOENIX_DIR=$PHP_MSESSION
 	else
 		AC_MSG_CHECKING(for msession in default path)
 		for i in /usr/local/phoenix /usr/local /usr; do
-			if test -r $i/lib/libphoenix.a; then
+			if test -r $i/$with__lib/libphoenix.a; then
 				PHOENIX_DIR=$i
 				AC_MSG_RESULT(found in $i)
 			fi
@@ -25,7 +25,7 @@
 
 
   	AC_DEFINE(HAVE_MSESSION, 1, [ ])
-  	PHP_ADD_LIBRARY_WITH_PATH(phoenix, "$PHOENIX_DIR/lib", PHOENIX_LIB)
+  	PHP_ADD_LIBRARY_WITH_PATH(phoenix, "$PHOENIX_DIR/$with__lib", PHOENIX_LIB)
 	PHOENIX_INCLUDE="-I$PHOENIX_DIR"
 	PHP_SUBST(PHOENIX_LIB)
 
diff -ur php-4.4.1.orig/ext/msql/config.m4 php-4.4.1/ext/msql/config.m4
--- php-4.4.1.orig/ext/msql/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/msql/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -28,10 +28,10 @@
   if test "$PHP_MSQL" != "no"; then
     if test "$PHP_MSQL" = "yes"; then
       MSQL_INCDIR=/usr/local/Hughes/include
-      MSQL_LIBDIR=/usr/local/Hughes/lib
+      MSQL_LIBDIR=/usr/local/Hughes/$with__lib
     else
       MSQL_INCDIR=$PHP_MSQL/include
-      MSQL_LIBDIR=$PHP_MSQL/lib
+      MSQL_LIBDIR=$PHP_MSQL/$with__lib
     fi
     PHP_ADD_LIBRARY_WITH_PATH(msql, $MSQL_LIBDIR, MSQL_SHARED_LIBADD)
     PHP_ADD_INCLUDE($MSQL_INCDIR)
diff -ur php-4.4.1.orig/ext/mssql/config.m4 php-4.4.1/ext/mssql/config.m4
--- php-4.4.1.orig/ext/mssql/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mssql/config.m4	2006-01-08 12:03:26.000000000 +0000
@@ -32,12 +32,12 @@
     fi
   fi  
 
-  if test ! -r "$FREETDS_INSTALLATION_DIR/lib/libtds.a" && test ! -r "$FREETDS_INSTALLATION_DIR/lib/libtds.so"; then
-     AC_MSG_ERROR(Could not find $FREETDS_INSTALLATION_DIR/lib/libtds.[a|so])
+  if test ! -r "$FREETDS_INSTALLATION_DIR/$with__lib/libtds.a" && test ! -r "$FREETDS_INSTALLATION_DIR/lib/libtds.so"; then
+     AC_MSG_ERROR(Could not find $FREETDS_INSTALLATION_DIR/$with__lib/libtds.[a|so])
   fi
 
   MSSQL_INCDIR=$FREETDS_INSTALLATION_DIR/include
-  MSSQL_LIBDIR=$FREETDS_INSTALLATION_DIR/lib
+  MSSQL_LIBDIR=$FREETDS_INSTALLATION_DIR/$with__lib
 
   PHP_ADD_INCLUDE($MSSQL_INCDIR)
   PHP_ADD_LIBRARY_WITH_PATH(sybdb, $MSSQL_LIBDIR, MSSQL_SHARED_LIBADD)
diff -ur php-4.4.1.orig/ext/mysql/config.m4 php-4.4.1/ext/mysql/config.m4
--- php-4.4.1.orig/ext/mysql/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/mysql/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -22,7 +22,7 @@
     /var/run/mysqld/mysqld.sock \
     /var/tmp/mysql.sock \
     /var/run/mysql/mysql.sock \
-    /var/lib/mysql/mysql.sock \
+    /var/$with__lib/mysql/mysql.sock \
     /var/mysql/mysql.sock \
     /usr/local/mysql/var/mysql.sock \
     /Private/tmp/mysql.sock \
@@ -121,7 +121,7 @@
       ;;
   esac
 
-  for i in lib lib/mysql; do
+  for i in $with__lib $with__lib/mysql; do
     MYSQL_LIB_CHK($i)
   done
 
@@ -136,9 +136,9 @@
       PHP_CHECK_LIBRARY($MY_LIBNAME, mysql_error, [], [
         AC_MSG_ERROR([mysql configure failed. Please check config.log for more information.])
       ], [
-        -L$PHP_ZLIB_DIR/lib -L$MYSQL_LIB_DIR 
+        -L$PHP_ZLIB_DIR/$with__lib -L$MYSQL_LIB_DIR 
       ])  
-      MYSQL_LIBS="-L$PHP_ZLIB_DIR/lib -lz"
+      MYSQL_LIBS="-L$PHP_ZLIB_DIR/$with__lib -lz"
     else
       PHP_ADD_LIBRARY(z,, MYSQL_SHARED_LIBADD)
       PHP_CHECK_LIBRARY($MY_LIBNAME, mysql_errno, [], [
diff -ur php-4.4.1.orig/ext/ncurses/config.m4 php-4.4.1/ext/ncurses/config.m4
--- php-4.4.1.orig/ext/ncurses/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ncurses/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -40,18 +40,18 @@
 
    PHP_CHECK_LIBRARY($LIBNAME, $LIBSYMBOL, [
      AC_DEFINE(HAVE_NCURSESLIB,1,[ ])
-     PHP_ADD_LIBRARY_WITH_PATH($LIBNAME, $NCURSES_DIR/lib, NCURSES_SHARED_LIBADD)
+     PHP_ADD_LIBRARY_WITH_PATH($LIBNAME, $NCURSES_DIR/$with__lib, NCURSES_SHARED_LIBADD)
 
      PHP_CHECK_LIBRARY(panel, new_panel, [
        AC_DEFINE(HAVE_NCURSES_PANEL,1,[ ])
-       PHP_ADD_LIBRARY_WITH_PATH(panel, $NCURSES_DIR/lib, NCURSES_SHARED_LIBADD)
+       PHP_ADD_LIBRARY_WITH_PATH(panel, $NCURSES_DIR/$with__lib, NCURSES_SHARED_LIBADD)
      ], [], [ 
-       -L$NCURSES_DIR/lib -l$LIBNAME -lm
+       -L$NCURSES_DIR/$with__lib -l$LIBNAME -lm
      ])
    ], [
-     AC_MSG_ERROR(Wrong ncurses lib version or lib not found)
+     AC_MSG_ERROR(Wrong ncurses $with__lib version or $with__lib not found)
    ], [
-     -L$NCURSES_DIR/lib -lm
+     -L$NCURSES_DIR/$with__lib -lm
    ])
  
    AC_CHECK_LIB($LIBNAME, color_set,   [AC_DEFINE(HAVE_NCURSES_COLOR_SET,  1, [ ])])
diff -ur php-4.4.1.orig/ext/oci8/config.m4 php-4.4.1/ext/oci8/config.m4
--- php-4.4.1.orig/ext/oci8/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/oci8/config.m4	2006-01-08 12:00:13.000000000 +0000
@@ -23,16 +23,16 @@
   if test -s "$OCI8_DIR/orainst/unix.rgs"; then
     OCI8_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`
     test -z "$OCI8_VERSION" && OCI8_VERSION=7.3
-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
+  elif test -f $OCI8_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
     OCI8_VERSION=10.1    
-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
+  elif test -f $OCI8_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
     OCI8_VERSION=9.0
-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
+  elif test -f $OCI8_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
     OCI8_VERSION=8.1
-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
+  elif test -f $OCI8_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
     OCI8_VERSION=8.0
-  elif test -f $OCI8_DIR/lib/libclntsh.a; then 
-    if test -f $OCI8_DIR/lib/libcore4.a; then 
+  elif test -f $OCI8_DIR/$with__lib/libclntsh.a; then 
+    if test -f $OCI8_DIR/$with__lib/libcore4.a; then 
       OCI8_VERSION=8.0
     else
       OCI8_VERSION=8.1
@@ -107,10 +107,10 @@
     OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
   fi
 
-  if test -f "$OCI8_DIR/lib/sysliblist"; then
-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/lib/sysliblist`, OCI8_SYSLIB)
-  elif test -f "$OCI8_DIR/rdbms/lib/sysliblist"; then
-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/rdbms/lib/sysliblist`, OCI8_SYSLIB)
+  if test -f "$OCI8_DIR/$with__lib/sysliblist"; then
+    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/$with__lib/sysliblist`, OCI8_SYSLIB)
+  elif test -f "$OCI8_DIR/rdbms/$with__lib/sysliblist"; then
+    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/rdbms/$with__lib/sysliblist`, OCI8_SYSLIB)
   fi
 
   AC_OCI8_VERSION($OCI8_DIR)
@@ -119,12 +119,12 @@
       PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, "", OCI8_SHARED_LIBADD)
       PHP_ADD_LIBRARY_WITH_PATH(core4, "", OCI8_SHARED_LIBADD)
       PHP_ADD_LIBRARY_WITH_PATH(psa, "", OCI8_SHARED_LIBADD)
-      PHP_ADD_LIBRARY_WITH_PATH(clntsh, $OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(clntsh, $OCI8_DIR/$with__lib, OCI8_SHARED_LIBADD)
       ;;
 
     8.1)
       PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+      PHP_ADD_LIBPATH($OCI8_DIR/$with__lib, OCI8_SHARED_LIBADD)
 
       dnl 
       dnl OCI_ATTR_STATEMENT is not available in all 8.1.x versions
@@ -134,7 +134,7 @@
 
     9.0)
       PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+      PHP_ADD_LIBPATH($OCI8_DIR/$with__lib, OCI8_SHARED_LIBADD)
       AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
 
       dnl These functions are only available in version >= 9.2
@@ -145,16 +145,16 @@
           AC_DEFINE(HAVE_OCI_9_2,1,[ ])
           OCI8_VERSION=9.2
         ], [], [
-          -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+          -L$OCI8_DIR/$with__lib $OCI8_SHARED_LIBADD
         ])
       ], [], [
-        -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+        -L$OCI8_DIR/$with__lib $OCI8_SHARED_LIBADD
       ])
       ;;
 
     10.1)
       PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+      PHP_ADD_LIBPATH($OCI8_DIR/$with__lib, OCI8_SHARED_LIBADD)
       AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
       AC_DEFINE(HAVE_OCI_9_2,1,[ ])
       AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
@@ -178,10 +178,10 @@
       PHP_ADD_LIBRARY(ocijdbc8, 1, OCI8_SHARED_LIBADD)
       AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
     ], [], [
-      -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+      -L$OCI8_DIR/$with__lib $OCI8_SHARED_LIBADD
     ])
   ], [
-    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+    -L$OCI8_DIR/$with__lib $OCI8_SHARED_LIBADD
   ])
 
   dnl
diff -ur php-4.4.1.orig/ext/odbc/config.m4 php-4.4.1/ext/odbc/config.m4
--- php-4.4.1.orig/ext/odbc/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/odbc/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -101,8 +101,8 @@
   fi
   if test "$withval" != "no"; then
     PHP_ADD_INCLUDE($withval/incl)
-    PHP_ADD_LIBPATH($withval/lib)
-    ODBC_OBJS="$withval/lib/odbclib.a"
+    PHP_ADD_LIBPATH($withval/$with__lib)
+    ODBC_OBJS="$withval/$with__lib/odbclib.a"
     ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
     $srcdir/build/shtool mkdir -f -p ext/odbc
     rm -f "$ODBC_LIB"
@@ -133,7 +133,7 @@
   fi
   if test "$withval" != "no"; then
     PHP_ADD_INCLUDE($withval/incl)
-    PHP_ADD_LIBPATH($withval/lib)
+    PHP_ADD_LIBPATH($withval/$with__lib)
     PHP_ADD_LIBRARY(sqlod)
     ODBC_TYPE=sapdb
     AC_DEFINE(HAVE_SAPDB,1,[ ])
@@ -159,7 +159,7 @@
   fi
   if test "$withval" != "no"; then
     ODBC_INCDIR=$withval/include
-    ODBC_LIBDIR=$withval/lib
+    ODBC_LIBDIR=$withval/$with__lib
     ODBC_INCLUDE=-I$ODBC_INCDIR
     ODBC_TYPE=solid
     if test -f $ODBC_LIBDIR/soc*35.a; then
@@ -189,10 +189,10 @@
   if test "$withval" != "no"; then
     if test "$withval" = "yes"; then
       ODBC_INCDIR=/home/db2inst1/sqllib/include
-      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
+      ODBC_LIBDIR=/home/db2inst1/sqllib/$with__lib
     else
       ODBC_INCDIR=$withval/include
-      ODBC_LIBDIR=$withval/lib
+      ODBC_LIBDIR=$withval/$with__lib
     fi
 	
     if ! test -f "$ODBC_INCDIR/sqlcli1.h"; then
@@ -277,9 +277,9 @@
     for I in $LIST
     do
         case $I in
-          $EMPRESSPATH/odbccl/lib/* | \
-          $EMPRESSPATH/rdbms/lib/* | \
-          $EMPRESSPATH/common/lib/*)
+          $EMPRESSPATH/odbccl/$with__lib/* | \
+          $EMPRESSPATH/rdbms/$with__lib/* | \
+          $EMPRESSPATH/common/$with__lib/*)
                 NEWLIST="$NEWLIST $I"
                 ;;
         esac
@@ -308,10 +308,10 @@
   if test "$withval" != "no"; then
     if test "$withval" = "yes"; then
         ODBC_INCDIR=/usr/local/birdstep/include
-        ODBC_LIBDIR=/usr/local/birdstep/lib
+        ODBC_LIBDIR=/usr/local/birdstep/$with__lib
     else
         ODBC_INCDIR=$withval/include
-        ODBC_LIBDIR=$withval/lib
+        ODBC_LIBDIR=$withval/$with__lib
     fi
    
     case $host_alias in
@@ -374,7 +374,7 @@
   fi
   if test "$withval" != "no"; then
     ODBC_INCDIR=$withval/include
-    ODBC_LIBDIR=$withval/lib
+    ODBC_LIBDIR=$withval/$with__lib
     ODBC_LFLAGS=-L$ODBC_LIBDIR
     ODBC_INCLUDE=-I$ODBC_INCDIR
     ODBC_LIBS=$CUSTOM_ODBC_LIBS
@@ -400,11 +400,11 @@
     withval=/usr/local
   fi
   if test "$withval" != "no"; then
-    PHP_ADD_LIBRARY_WITH_PATH(iodbc, $withval/lib)
+    PHP_ADD_LIBRARY_WITH_PATH(iodbc, $withval/$with__lib)
     PHP_ADD_INCLUDE($withval/include, 1)
     ODBC_TYPE=iodbc
     ODBC_INCLUDE=-I$withval/include
-    ODBC_LFLAGS=-L$withval/lib
+    ODBC_LFLAGS=-L$withval/$with__lib
     ODBC_LIBS=-liodbc
     AC_DEFINE(HAVE_IODBC,1,[ ])
     AC_DEFINE(HAVE_ODBC2,1,[ ])
@@ -430,7 +430,7 @@
   fi
   if test "$withval" != "no"; then
     ODBC_INCDIR=$withval/include
-    ODBC_LIBDIR=$withval/lib
+    ODBC_LIBDIR=$withval/$with__lib
     ODBC_LFLAGS=-L$ODBC_LIBDIR
     ODBC_INCLUDE=-I$ODBC_INCDIR
     ODBC_LIBS=-lesoobclient
@@ -457,7 +457,7 @@
   fi
   if test "$withval" != "no"; then
     ODBC_INCDIR=$withval/include
-    ODBC_LIBDIR=$withval/lib
+    ODBC_LIBDIR=$withval/$with__lib
     ODBC_LFLAGS=-L$ODBC_LIBDIR
     ODBC_INCLUDE=-I$ODBC_INCDIR
     ODBC_LIBS=-lodbc
@@ -506,7 +506,7 @@
 
   if test "$withval" != "no"; then
     ODBC_INCDIR=$withval/include
-    ODBC_LIBDIR=$withval/lib
+    ODBC_LIBDIR=$withval/$with__lib
     ODBC_INCLUDE=-I$ODBC_INCDIR
     ODBC_LFLAGS=-L$ODBC_LIBDIR
     ODBC_INCLUDE=-I$ODBC_INCDIR
diff -ur php-4.4.1.orig/ext/oracle/config.m4 php-4.4.1/ext/oracle/config.m4
--- php-4.4.1.orig/ext/oracle/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/oracle/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -7,14 +7,14 @@
   if test -s "$ORACLE_DIR/orainst/unix.rgs"; then
   	ORACLE_VERSION=`grep '"ocommon"' $ORACLE_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`
 	test -z "$ORACLE_VERSION" && ORACLE_VERSION=7.3
-  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
+  elif test -f $ORACLE_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
     ORACLE_VERSION=9.0
-  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
+  elif test -f $ORACLE_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
     ORACLE_VERSION=8.1
-  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
+  elif test -f $ORACLE_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
     ORACLE_VERSION=8.0
-  elif test -f $ORACLE_DIR/lib/libclntsh.a; then
-    if test -f $ORACLE_DIR/lib/libcore4.a; then
+  elif test -f $ORACLE_DIR/$with__lib/libclntsh.a; then
+    if test -f $ORACLE_DIR/$with__lib/libcore4.a; then
       ORACLE_VERSION=8.0
     else
       ORACLE_VERSION=8.1
@@ -50,87 +50,87 @@
   	PHP_ADD_INCLUDE($ORACLE_DIR/plsql/public)
   fi
 
-  if test -f "$ORACLE_DIR/lib/sysliblist"; then
-  	PHP_EVAL_LIBLINE(`cat $ORACLE_DIR/lib/sysliblist`, ORACLE_SHARED_LIBADD)
-  elif test -f "$ORACLE_DIR/rdbms/lib/sysliblist"; then
-  	PHP_EVAL_LIBLINE(`cat $ORACLE_DIR/rdbms/lib/sysliblist`, ORACLE_SHARED_LIBADD)
+  if test -f "$ORACLE_DIR/$with__lib/sysliblist"; then
+  	PHP_EVAL_LIBLINE(`cat $ORACLE_DIR/$with__lib/sysliblist`, ORACLE_SHARED_LIBADD)
+  elif test -f "$ORACLE_DIR/rdbms/$with__lib/sysliblist"; then
+  	PHP_EVAL_LIBLINE(`cat $ORACLE_DIR/rdbms/$with__lib/sysliblist`, ORACLE_SHARED_LIBADD)
   fi
 
   AC_ORACLE_VERSION($ORACLE_DIR)
   case $ORACLE_VERSION in
 	7.0|7.1)
-	  if test -f $ORACLE_DIR/lib/liboracle.$SHLIB_SUFFIX_NAME; then
-	    PHP_ADD_LIBRARY_WITH_PATH(oracle, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	  if test -f $ORACLE_DIR/$with__lib/liboracle.$SHLIB_SUFFIX_NAME; then
+	    PHP_ADD_LIBRARY_WITH_PATH(oracle, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  else
-	    PHP_ADD_LIBRARY_WITH_PATH(core, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(cv6, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(core, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(cv6, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-		PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-		PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(core, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(cv6, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(core, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(cv6, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+		PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+		PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 		if test "$ext_shared" = "yes"; then
-		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
+		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/$with__lib/osntab.o $ORACLE_SHARED_LIBADD";
 		else
-		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
+		  LIBS="$ORACLE_DIR/$with__lib/osntab.o $LIBS";
 		fi
-		PHP_ADD_LIBRARY_WITH_PATH(ocic, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+		PHP_ADD_LIBRARY_WITH_PATH(ocic, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 		if test "`uname -s 2>/dev/null`" = "AIX"; then
 		  if test "$ext_shared" = "yes"; then
-		  	ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -bI:$ORACLE_DIR/lib/mili.exp"
+		  	ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -bI:$ORACLE_DIR/$with__lib/mili.exp"
 		  else
-		  	LIBS="$LIBS -bI:$ORACLE_DIR/lib/mili.exp"
+		  	LIBS="$LIBS -bI:$ORACLE_DIR/$with__lib/mili.exp"
 		  fi
 		fi
 	  fi
 	  ;;
 
 	7.2)
-	  if test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME; then
-	    PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	  if test -f $ORACLE_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME; then
+	    PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  else
-	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(c3v6, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(c3v6, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(ora, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 		if test "$ext_shared" = "yes"; then
-		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
+		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/$with__lib/osntab.o $ORACLE_SHARED_LIBADD";
 		else
-		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
+		  LIBS="$ORACLE_DIR/$with__lib/osntab.o $LIBS";
 		fi
-	    PHP_ADD_LIBRARY_WITH_PATH(ocic, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(ocic, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  fi
 	  ;;
 
 	7.3)
-	  if test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME; then
-	    PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	  if test -f $ORACLE_DIR/$with__lib/libclntsh.$SHLIB_SUFFIX_NAME; then
+	    PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  else
-	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(c3v6, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(epc, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(generic, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(common, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(ncr, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(generic, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(common, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(ncr, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
-	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(core3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(c3v6, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(epc, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(generic, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(common, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(ncr, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(generic, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(common, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(ncr, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(sqlnet, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
+	    PHP_ADD_LIBRARY_WITH_PATH(client, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  fi
 	  ;;
 	  
@@ -138,12 +138,12 @@
   	  PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, "", ORACLE_SHARED_LIBADD)
   	  PHP_ADD_LIBRARY_WITH_PATH(core4, "", ORACLE_SHARED_LIBADD)
   	  PHP_ADD_LIBRARY_WITH_PATH(psa, "", ORACLE_SHARED_LIBADD)
-  	  PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+  	  PHP_ADD_LIBRARY_WITH_PATH(clntsh, $ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  ;;
 
 	8.1|9.0)
   	  PHP_ADD_LIBRARY(clntsh, 1, ORACLE_SHARED_LIBADD)
-  	  PHP_ADD_LIBPATH($ORACLE_DIR/lib, ORACLE_SHARED_LIBADD)
+  	  PHP_ADD_LIBPATH($ORACLE_DIR/$with__lib, ORACLE_SHARED_LIBADD)
 	  ;;
 	*)
       AC_MSG_ERROR(Unsupported Oracle version!)
diff -ur php-4.4.1.orig/ext/ovrimos/config.m4 php-4.4.1/ext/ovrimos/config.m4
--- php-4.4.1.orig/ext/ovrimos/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/ovrimos/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -16,9 +16,9 @@
   fi
 
   PHP_ADD_INCLUDE($OVRIMOS_DIR/include)
-  LDFLAGS="$LDFLAGS $ld_runpath_switch$OVRIMOS_DIR/lib -L$OVRIMOS_DIR/lib"
+  LDFLAGS="$LDFLAGS $ld_runpath_switch$OVRIMOS_DIR/$with__lib -L$OVRIMOS_DIR/$with__lib"
   AC_CHECK_LIB(sqlcli, main)
-  PHP_ADD_LIBRARY_WITH_PATH(sqlcli, $OVRIMOS_DIR/lib, OVRIMOS_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(sqlcli, $OVRIMOS_DIR/$with__lib, OVRIMOS_SHARED_LIBADD)
 
   PHP_NEW_EXTENSION(ovrimos, ovrimos.c, $ext_shared)
   PHP_SUBST(OVRIMOS_SHARED_LIBADD)
diff -ur php-4.4.1.orig/ext/pcre/config0.m4 php-4.4.1/ext/pcre/config0.m4
--- php-4.4.1.orig/ext/pcre/config0.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/pcre/config0.m4	2006-01-08 11:49:26.000000000 +0000
@@ -25,7 +25,7 @@
       AC_MSG_ERROR([Could not find pcre.h in $PHP_PCRE_REGEX])
     fi
 
-    for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/lib; do
+    for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/$with__lib; do
       test -f $j/libpcre.a -o -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
     done
     
diff -ur php-4.4.1.orig/ext/pdf/config.m4 php-4.4.1/ext/pdf/config.m4
--- php-4.4.1.orig/ext/pdf/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/pdf/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -40,11 +40,11 @@
   if test "$PHP_JPEG_DIR" != "no"; then
     PHP_CHECK_LIBRARY(jpeg,jpeg_read_header, 
     [
-      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $PHP_JPEG_DIR/lib, PDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(jpeg, $PHP_JPEG_DIR/$with__lib, PDF_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([libjpeg not found!])
     ],[
-      -L$PHP_JPEG_DIR/lib
+      -L$PHP_JPEG_DIR/$with__lib
     ])
   else
     AC_MSG_WARN([If configure fails, try --with-jpeg-dir=<DIR>])
@@ -54,11 +54,11 @@
   if test "$PHP_PNG_DIR" != "no"; then
     PHP_CHECK_LIBRARY(png,png_create_info_struct, 
     [
-      PHP_ADD_LIBRARY_WITH_PATH(png, $PHP_PNG_DIR/lib, PDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(png, $PHP_PNG_DIR/$with__lib, PDF_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([libpng not found!])
     ],[
-      -L$PHP_PNG_DIR/lib
+      -L$PHP_PNG_DIR/$with__lib
     ])
   else
     AC_MSG_WARN([If configure fails, try --with-png-dir=<DIR>])
@@ -68,11 +68,11 @@
   if test "$PHP_TIFF_DIR" != "no"; then
     PHP_CHECK_LIBRARY(tiff,TIFFOpen, 
     [
-      PHP_ADD_LIBRARY_WITH_PATH(tiff, $PHP_TIFF_DIR/lib, PDF_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(tiff, $PHP_TIFF_DIR/$with__lib, PDF_SHARED_LIBADD)
     ],[
       AC_MSG_ERROR([libtiff not found!])
     ],[
-      -L$PHP_TIFF_DIR/lib
+      -L$PHP_TIFF_DIR/$with__lib
     ])
   else
     AC_MSG_WARN([If configure fails, try --with-tiff-dir=<DIR>])
@@ -84,7 +84,7 @@
     AC_MSG_RESULT([no. If configure fails, try --with-zlib-dir=<DIR>])
   else           
     AC_MSG_RESULT([$PHP_ZLIB_DIR])
-    PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/lib, PDF_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(z, $PHP_ZLIB_DIR/$with__lib, PDF_SHARED_LIBADD)
   fi
 
   dnl #
@@ -118,7 +118,7 @@
         PHP_CHECK_LIBRARY(pdf, PDF_show_boxed, 
         [
           AC_DEFINE(HAVE_PDFLIB,1,[ ]) 
-          PHP_ADD_LIBRARY_WITH_PATH(pdf, $PHP_PDFLIB/lib, PDF_SHARED_LIBADD)
+          PHP_ADD_LIBRARY_WITH_PATH(pdf, $PHP_PDFLIB/$with__lib, PDF_SHARED_LIBADD)
           PHP_ADD_INCLUDE($PHP_PDFLIB/include)
         ],[
           AC_MSG_ERROR([
@@ -127,7 +127,7 @@
 See config.log for more information.
 ])
         ],[
-          -L$PHP_PDFLIB/lib $PDF_SHARED_LIBADD
+          -L$PHP_PDFLIB/$with__lib $PDF_SHARED_LIBADD
         ])
       else
         AC_MSG_ERROR([pdflib.h not found! Check the path passed to --with-pdflib=<PATH>. PATH should be the install prefix directory.])
diff -ur php-4.4.1.orig/ext/pfpro/config.m4 php-4.4.1/ext/pfpro/config.m4
--- php-4.4.1.orig/ext/pfpro/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/pfpro/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -14,16 +14,16 @@
       PFPRO_INC_DIR=$i
     elif test -r $i/include/$PFPRO_HDR; then
       PFPRO_INC_DIR=$i/include
-    elif test -r $i/lib/$PFPRO_HDR; then
-      PFPRO_INC_DIR=$i/lib
+    elif test -r $i/$with__lib/$PFPRO_HDR; then
+      PFPRO_INC_DIR=$i/$with__lib
     elif test -r $i/bin/$PFPRO_HDR; then
       PFPRO_INC_DIR=$i/bin
     fi
 
     if test -r $i/$PFPRO_LIB; then
       PFPRO_LIB_DIR=$i
-    elif test -r $i/lib/$PFPRO_LIB; then
-      PFPRO_LIB_DIR=$i/lib
+    elif test -r $i/$with__lib/$PFPRO_LIB; then
+      PFPRO_LIB_DIR=$i/$with__lib
     fi
 
 	test -n "$PFPRO_INC_DIR" && test -n "$PFPRO_LIB_DIR" && break
diff -ur php-4.4.1.orig/ext/pgsql/config.m4 php-4.4.1/ext/pgsql/config.m4
--- php-4.4.1.orig/ext/pgsql/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/pgsql/config.m4	2006-01-08 12:04:10.000000000 +0000
@@ -44,7 +44,7 @@
         fi
       done
 
-      for j in lib lib/pgsql lib/postgres lib/postgresql ""; do
+      for j in $with__lib $with__lib/pgsql $with__lib/postgres $with__lib/postgresql ""; do
         if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
           PGSQL_LIBDIR=$i/$j
         fi
diff -ur php-4.4.1.orig/ext/pspell/config.m4 php-4.4.1/ext/pspell/config.m4
--- php-4.4.1.orig/ext/pspell/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/pspell/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -27,7 +27,7 @@
 		AC_MSG_ERROR(Cannot find pspell)
 	fi
 
-	PSPELL_LIBDIR=$PSPELL_DIR/lib
+	PSPELL_LIBDIR=$PSPELL_DIR/$with__lib
 
 	PHP_ADD_LIBRARY_WITH_PATH(pspell, $PSPELL_LIBDIR, PSPELL_SHARED_LIBADD)
 
diff -ur php-4.4.1.orig/ext/qtdom/config.m4 php-4.4.1/ext/qtdom/config.m4
--- php-4.4.1.orig/ext/qtdom/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/qtdom/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -9,16 +9,16 @@
   case $PHP_QTDOM in
     yes)
       if test -f $QTDIR/include/qdom.h; then
-        QTDOM_LIBDIR=$QTDIR/lib
+        QTDOM_LIBDIR=$QTDIR/$with__lib
         QTDOM_INCDIR=$QTDIR/include
-      elif test -f /usr/lib/qt2/include/qdom.h; then
-        QTDOM_LIBDIR=/usr/lib
-        QTDOM_INCDIR=/usr/lib/qt2/include
+      elif test -f /usr/$with__lib/qt2/include/qdom.h; then
+        QTDOM_LIBDIR=/usr/$with__lib
+        QTDOM_INCDIR=/usr/$with__lib/qt2/include
       fi
       ;;
     *)
       if test -f $PHP_QTDOM/include/qdom.h; then
-        QTDOM_LIBDIR=$PHP_QTDOM/lib
+        QTDOM_LIBDIR=$PHP_QTDOM/$with__lib
         QTDOM_INCDIR=$PHP_QTDOM/include
       fi
       ;;
diff -ur php-4.4.2.orig/ext/readline/config.m4 php-4.4.2/ext/readline/config.m4
--- php-4.4.2.orig/ext/readline/config.m4	2005-11-18 13:10:33.000000000 -0200
+++ php-4.4.2/ext/readline/config.m4	2006-06-15 22:06:55.000000000 -0300
@@ -36,27 +36,27 @@
 
   PHP_CHECK_LIBRARY(readline, readline,
   [
-    PHP_ADD_LIBRARY_WITH_PATH(readline, $READLINE_DIR/lib, READLINE_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(readline, $READLINE_DIR/$with__lib, READLINE_SHARED_LIBADD)
   ], [
     AC_MSG_ERROR(readline library not found)
   ], [
-    -L$READLINE_DIR/lib $PHP_READLINE_LIBS
+    -L$READLINE_DIR/$with__lib $PHP_READLINE_LIBS
   ])
 
   PHP_CHECK_LIBRARY(readline, rl_callback_read_char,
   [
     AC_DEFINE(HAVE_RL_CALLBACK_READ_CHAR, 1, [ ])
   ],[],[
-    -L$READLINE_DIR/lib $PHP_READLINE_LIBS
+    -L$READLINE_DIR/$with__lib $PHP_READLINE_LIBS
   ])
 
   PHP_CHECK_LIBRARY(history, add_history,
   [
-    PHP_ADD_LIBRARY_WITH_PATH(history, $READLINE_DIR/lib, READLINE_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(history, $READLINE_DIR/$with__lib, READLINE_SHARED_LIBADD)
   ], [
     AC_MSG_ERROR(history library required by readline not found)
   ], [
-    -L$READLINE_DIR/lib $PHP_READLINE_LIBS
+    -L$READLINE_DIR/$with__lib $PHP_READLINE_LIBS
   ])
 
   PHP_NEW_EXTENSION(readline, readline.c, $ext_shared, cli)
@@ -87,11 +87,11 @@
 
   PHP_CHECK_LIBRARY(edit, readline,
   [
-    PHP_ADD_LIBRARY_WITH_PATH(edit, $LIBEDIT_DIR/lib, READLINE_SHARED_LIBADD)  
+    PHP_ADD_LIBRARY_WITH_PATH(edit, $LIBEDIT_DIR/$with__lib, READLINE_SHARED_LIBADD)  
   ], [
     AC_MSG_ERROR(edit library required by readline not found)
   ], [
-    -L$READLINE_DIR/lib 
+    -L$READLINE_DIR/$with__lib 
   ])
 
   PHP_NEW_EXTENSION(readline, readline.c, $ext_shared, cli)
diff -ur php-4.4.1.orig/ext/recode/config.m4 php-4.4.1/ext/recode/config.m4
--- php-4.4.1.orig/ext/recode/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/recode/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -12,17 +12,17 @@
     if test -f $i/include/recode.h; then
       RECODE_DIR=$i
       RECODE_INC=include
-      RECODE_LIB=lib
+      RECODE_LIB=$with__lib
     fi
     if test -f $i/include/recode/recode.h; then
       RECODE_DIR=$i
       RECODE_INC=include/recode
-      RECODE_LIB=lib/recode
+      RECODE_LIB=$with__lib/recode
     fi
     if test -f $i/recode/include/recode.h; then
       RECODE_DIR=$i/recode
       RECODE_INC=include
-      RECODE_LIB=lib
+      RECODE_LIB=$with__lib
     fi
     test -n "$RECODE_DIR" && break
   done
diff -ur php-4.4.1.orig/ext/session/config.m4 php-4.4.1/ext/session/config.m4
--- php-4.4.1.orig/ext/session/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/session/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -25,7 +25,7 @@
     AC_MSG_ERROR(cannot find mm library)
   fi
   
-  PHP_ADD_LIBRARY_WITH_PATH(mm, $MM_DIR/lib, SESSION_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(mm, $MM_DIR/$with__lib, SESSION_SHARED_LIBADD)
   PHP_ADD_INCLUDE($MM_DIR/include)
   AC_DEFINE(HAVE_LIBMM, 1, [Whether you have libmm])
 fi
diff -ur php-4.4.1.orig/ext/snmp/config.m4 php-4.4.1/ext/snmp/config.m4
--- php-4.4.1.orig/ext/snmp/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/snmp/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -46,12 +46,12 @@
         test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
       done
       for i in /usr /usr/snmp /usr/local /usr/local/snmp; do
-        test -f $i/lib/libsnmp.a -o -f $i/lib/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i/lib
+        test -f $i/$with__lib/libsnmp.a -o -f $i/$with__lib/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i/$with__lib
       done
     else
       SNMP_INCDIR=$PHP_SNMP/include
       test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
-      SNMP_LIBDIR=$PHP_SNMP/lib
+      SNMP_LIBDIR=$PHP_SNMP/$with__lib
     fi
 
     if test -z "$SNMP_INCDIR"; then
diff -ur php-4.4.1.orig/ext/swf/config.m4 php-4.4.1/ext/swf/config.m4
--- php-4.4.1.orig/ext/swf/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/swf/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -6,12 +6,12 @@
 [  --with-swf[=DIR]        Include swf support])
 
 if test "$PHP_SWF" != "no"; then
-  if test -r $PHP_SWF/lib/libswf.a; then
+  if test -r $PHP_SWF/$with__lib/libswf.a; then
     SWF_DIR=$PHP_SWF
   else
     AC_MSG_CHECKING(for libswf in default path)
     for i in /usr/local /usr; do
-      if test -r $i/lib/libswf.a; then
+      if test -r $i/$with__lib/libswf.a; then
         SWF_DIR=$i
         AC_MSG_RESULT(found in $i)
       fi
@@ -22,13 +22,13 @@
     AC_MSG_RESULT(not found)
     AC_MSG_ERROR(Please reinstall the libswf distribution -
    swf.h should be <swf-dir>/include and
-   libswf.a should be in <swf-dir>/lib)
+   libswf.a should be in <swf-dir>/$with__lib)
   fi
 
   PHP_ADD_INCLUDE($SWF_DIR/include)
 
   PHP_SUBST(SWF_SHARED_LIBADD)
-  PHP_ADD_LIBRARY_WITH_PATH(swf, $SWF_DIR/lib, SWF_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(swf, $SWF_DIR/$with__lib, SWF_SHARED_LIBADD)
   AC_DEFINE(HAVE_SWF,1,[ ])
 
   PHP_NEW_EXTENSION(swf, swf.c, $ext_shared)
diff -ur php-4.4.1.orig/ext/sybase/config.m4 php-4.4.1/ext/sybase/config.m4
--- php-4.4.1.orig/ext/sybase/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/sybase/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -10,10 +10,10 @@
 if test "$PHP_SYBASE" != "no"; then
   if test "$PHP_SYBASE" = "yes"; then
     SYBASE_INCDIR=/home/sybase/include
-    SYBASE_LIBDIR=/home/sybase/lib
+    SYBASE_LIBDIR=/home/sybase/$with__lib
   else
     SYBASE_INCDIR=$PHP_SYBASE/include
-    SYBASE_LIBDIR=$PHP_SYBASE/lib
+    SYBASE_LIBDIR=$PHP_SYBASE/$with__lib
   fi
   PHP_ADD_INCLUDE($SYBASE_INCDIR)
   PHP_ADD_LIBRARY_WITH_PATH(sybdb, $SYBASE_LIBDIR, SYBASE_SHARED_LIBADD)
diff -ur php-4.4.1.orig/ext/sybase_ct/config.m4 php-4.4.1/ext/sybase_ct/config.m4
--- php-4.4.1.orig/ext/sybase_ct/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/sybase_ct/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -18,10 +18,10 @@
   
   if test "$PHP_SYBASE_CT" = "yes"; then
     SYBASE_CT_INCDIR=/home/sybase/include
-    SYBASE_CT_LIBDIR=/home/sybase/lib
+    SYBASE_CT_LIBDIR=/home/sybase/$with__lib
   else
     SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
-    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
+    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/$with__lib
   fi
 
   if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
diff -ur php-4.4.1.orig/ext/xml/config.m4 php-4.4.1/ext/xml/config.m4
--- php-4.4.1.orig/ext/xml/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/xml/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -11,7 +11,7 @@
 fi
 
 PHP_ARG_ENABLE(xml,whether to enable XML support,
-[  --disable-xml           Disable XML support using bundled expat lib], yes)
+[  --disable-xml           Disable XML support using bundled expat $with__lib], yes)
 
 PHP_ARG_WITH(expat-dir, external libexpat install dir,
 [  --with-expat-dir=<DIR>    XML: external libexpat install dir], no, no)
@@ -31,7 +31,7 @@
     PHP_NEW_EXTENSION(xml, xml.c, $ext_shared)
 
     for i in $PHP_XML $PHP_EXPAT_DIR; do
-      if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME ; then
+      if test -f $i/$with__lib/libexpat.a -o -f $i/$with__lib/libexpat.$SHLIB_SUFFIX_NAME ; then
         EXPAT_DIR=$i
       fi
     done
@@ -41,7 +41,7 @@
     fi
 
     PHP_ADD_INCLUDE($EXPAT_DIR/include)
-    PHP_ADD_LIBRARY_WITH_PATH(expat, $EXPAT_DIR/lib, XML_SHARED_LIBADD)
+    PHP_ADD_LIBRARY_WITH_PATH(expat, $EXPAT_DIR/$with__lib, XML_SHARED_LIBADD)
     PHP_SUBST(XML_SHARED_LIBADD)
   fi
 fi
diff -ur php-4.4.1.orig/ext/xmlrpc/config.m4 php-4.4.1/ext/xmlrpc/config.m4
--- php-4.4.1.orig/ext/xmlrpc/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/xmlrpc/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -23,9 +23,9 @@
 
   testval=no
   for i in $PHP_EXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
-    if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME; then
+    if test -f $i/$with__lib/libexpat.a -o -f $i/$with__lib/libexpat.$SHLIB_SUFFIX_NAME; then
       AC_DEFINE(HAVE_LIBEXPAT2,1,[ ])
-      PHP_ADD_LIBRARY_WITH_PATH(expat, $i/lib, XMLRPC_SHARED_LIBADD)
+      PHP_ADD_LIBRARY_WITH_PATH(expat, $i/$with__lib, XMLRPC_SHARED_LIBADD)
       PHP_ADD_INCLUDE($i/include)
       testval=yes
       break
@@ -88,5 +88,5 @@
   fi
 
   PHP_ADD_INCLUDE($XMLRPC_DIR)
-  PHP_ADD_LIBRARY_WITH_PATH(xmlrpc, $XMLRPC_DIR/lib, XMLRPC_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH(xmlrpc, $XMLRPC_DIR/$with__lib, XMLRPC_SHARED_LIBADD)
 fi
diff -ur php-4.4.1.orig/ext/xslt/config.m4 php-4.4.1/ext/xslt/config.m4
--- php-4.4.1.orig/ext/xslt/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/xslt/config.m4	2006-01-08 12:01:12.000000000 +0000
@@ -98,10 +98,10 @@
 
     found_expat=no
     for i in $PHP_EXPAT_DIR $XSLT_DIR /usr/local /usr; do
-      if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME; then
+      if test -f $i/$with__lib/libexpat.a -o -f $i/$with__lib/libexpat.$SHLIB_SUFFIX_NAME; then
         AC_DEFINE(HAVE_LIBEXPAT2, 1, [ ])
         PHP_ADD_INCLUDE($i/include)
-        PHP_ADD_LIBRARY_WITH_PATH(expat, $i/lib, XSLT_SHARED_LIBADD)
+        PHP_ADD_LIBRARY_WITH_PATH(expat, $i/$with__lib, XSLT_SHARED_LIBADD)
         found_expat=yes
         break
       fi
@@ -125,7 +125,7 @@
      
     if test "$PHP_SABLOT_JS" != "no"; then
       for i in $PHP_SABLOT_JS /usr/local /usr; do
-        if test -f $i/lib/libjs.a -o -f $i/lib/libjs.$SHLIB_SUFFIX_NAME; then
+        if test -f $i/$with__lib/libjs.a -o -f $i/$with__lib/libjs.$SHLIB_SUFFIX_NAME; then
           PHP_SABLOT_JS_DIR=$i
           break
         fi
@@ -133,12 +133,12 @@
 
       PHP_CHECK_LIBRARY(js, JS_GetRuntime,
       [
-        PHP_ADD_LIBRARY_WITH_PATH(js, $PHP_SABLOT_JS_DIR/lib, XSLT_SHARED_LIBADD)
-        PHP_SABLOT_JS_LIBS="-L$PHP_SABLOT_JS_DIR/lib -ljs"
+        PHP_ADD_LIBRARY_WITH_PATH(js, $PHP_SABLOT_JS_DIR/$with__lib, XSLT_SHARED_LIBADD)
+        PHP_SABLOT_JS_LIBS="-L$PHP_SABLOT_JS_DIR/$with__lib -ljs"
       ], [
         AC_MSG_ERROR([libjs not found. Please check config.log for more information.])
       ], [
-        -L$PHP_SABLOT_JS_DIR/lib
+        -L$PHP_SABLOT_JS_DIR/$with__lib
       ])
     fi
 
@@ -146,7 +146,7 @@
     [
       AC_DEFINE(HAVE_SABLOT_SET_ENCODING, 1, [ ])
     ], [], [
-      -L$XSLT_DIR/lib $PHP_SABLOT_JS_LIBS
+      -L$XSLT_DIR/$with__lib $PHP_SABLOT_JS_LIBS
     ])
 
     dnl SablotSetOptions implemented in Sablotron CVS > 2002/10/31
@@ -154,14 +154,14 @@
     [
       AC_DEFINE(HAVE_SABLOT_GET_OPTIONS, 1, [Whether Sablotron supports SablotGetOptions])
     ], [], [
-      -L$XSLT_DIR/lib $PHP_SABLOT_JS_LIBS
+      -L$XSLT_DIR/$with__lib $PHP_SABLOT_JS_LIBS
     ])
 
     AC_DEFINE(HAVE_SABLOT_BACKEND, 1, [ ])
   fi
 
   PHP_ADD_INCLUDE($XSLT_DIR/include)
-  PHP_ADD_LIBRARY_WITH_PATH($XSLT_LIBNAME, $XSLT_DIR/lib, XSLT_SHARED_LIBADD)
+  PHP_ADD_LIBRARY_WITH_PATH($XSLT_LIBNAME, $XSLT_DIR/$with__lib, XSLT_SHARED_LIBADD)
 
   AC_DEFINE(HAVE_XSLT, 1, [ ])
 fi
diff -ur php-4.4.1.orig/ext/zip/config.m4 php-4.4.1/ext/zip/config.m4
--- php-4.4.1.orig/ext/zip/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/zip/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -24,7 +24,7 @@
   	AC_DEFINE(HAVE_NEW_ZZIPLIB,1,[ ])	
   fi
 
-  ZZIPLIB_LIBDIR=$ZZIPLIB_DIR/lib
+  ZZIPLIB_LIBDIR=$ZZIPLIB_DIR/$with__lib
 
   PHP_CHECK_LIBRARY(zzip, zzip_open,
   [
diff -ur php-4.4.1.orig/ext/zlib/config0.m4 php-4.4.1/ext/zlib/config0.m4
--- php-4.4.1.orig/ext/zlib/config0.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/ext/zlib/config0.m4	2006-01-08 11:49:26.000000000 +0000
@@ -41,10 +41,10 @@
   ],[
     AC_MSG_ERROR(ZLIB extension requires zlib >= 1.0.9)
   ],[
-    -L$ZLIB_DIR/lib
+    -L$ZLIB_DIR/$with__lib
   ])
 
-  PHP_ADD_LIBPATH($ZLIB_DIR/lib, ZLIB_SHARED_LIBADD)
+  PHP_ADD_LIBPATH($ZLIB_DIR/$with__lib, ZLIB_SHARED_LIBADD)
 
   PHP_ZLIB_DIR=$ZLIB_DIR
   PHP_ADD_LIBRARY(z,, ZLIB_SHARED_LIBADD)
diff -ur php-4.4.1.orig/sapi/caudium/config.m4 php-4.4.1/sapi/caudium/config.m4
--- php-4.4.1.orig/sapi/caudium/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/sapi/caudium/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -26,7 +26,7 @@
 	fi
     if $PIKE -e 'float v; int rel;sscanf(version(), "Pike v%f release %d", v, rel);v += rel/10000.0; if(v < 7.0268) exit(1); exit(0);'; then
 		PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
-	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,' `
+	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,$with__lib/pike/modules,include/pike,' -e 's,$with__lib/modules,include/pike,' `
 		if test -z "$PIKE_INCLUDE_DIR" -o -z "$PIKE_MODULE_DIR"; then
 			AC_MSG_ERROR(Failed to figure out Pike module and include directories)
 		fi
@@ -83,7 +83,7 @@
     PIKE_VERSION=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`   
 	AC_DEFINE(HAVE_CAUDIUM,1,[Whether to compile with Caudium support])
     PHP_SELECT_SAPI(caudium, shared, caudium.c)
-	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $withval/lib/$PIKE_VERSION/PHP4.so"
+	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $withval/$with__lib/$PIKE_VERSION/PHP4.so"
 	RESULT="	*** Pike binary used:         $PIKE
 	*** Pike include dir(s) used: $PIKE_INCLUDE_DIR
 	*** Pike version:             $PIKE_VERSION"
diff -ur php-4.4.1.orig/sapi/embed/config.m4 php-4.4.1/sapi/embed/config.m4
--- php-4.4.1.orig/sapi/embed/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/sapi/embed/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -11,11 +11,11 @@
   case $enableval in
     yes|shared)
       PHP_EMBED_TYPE=shared
-      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)\$(prefix)/lib"
+      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/$with__lib; \$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)\$(prefix)/$with__lib"
       ;;
     static)
       PHP_EMBED_TYPE=static
-      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0644 $SAPI_STATIC \$(INSTALL_ROOT)\$(prefix)/lib"
+      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/$with__lib; \$(INSTALL) -m 0644 $SAPI_STATIC \$(INSTALL_ROOT)\$(prefix)/$with__lib"
       ;;
     *)
       PHP_EMBED_TYPE=no
diff -ur php-4.4.1.orig/sapi/roxen/config.m4 php-4.4.1/sapi/roxen/config.m4
--- php-4.4.1.orig/sapi/roxen/config.m4	2006-01-08 11:44:14.000000000 +0000
+++ php-4.4.1/sapi/roxen/config.m4	2006-01-08 11:49:26.000000000 +0000
@@ -20,7 +20,7 @@
 	fi
     if $PIKE -e 'float v; catch(v = __VERSION__ + (__BUILD__/10000.0)); if(v < 0.7079) exit(1); exit(0);'; then
 		PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
-	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,'`
+	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,$with__lib/pike/modules,include/pike,' -e 's,$with__lib/modules,include/pike,'`
 		if test -z "$PIKE_INCLUDE_DIR" -o -z "$PIKE_MODULE_DIR"; then
 			AC_MSG_ERROR(Failed to figure out Pike module and include directories)
 		fi
